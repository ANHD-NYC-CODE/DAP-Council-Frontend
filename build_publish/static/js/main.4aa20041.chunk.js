(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(e,t,a){e.exports=a(420)},254:function(e,t,a){},257:function(e,t,a){},259:function(e,t,a){},261:function(e,t,a){},263:function(e,t,a){},266:function(e,t,a){},271:function(e,t,a){},273:function(e,t,a){},418:function(e,t,a){},420:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"HPDVIOLATIONS",function(){return Je}),a.d(n,"DOBVIOLATIONS",function(){return Ke}),a.d(n,"ECBVIOLATIONS",function(){return We}),a.d(n,"HPDCOMPLAINTS",function(){return Xe}),a.d(n,"DOBCOMPLAINTS",function(){return Qe}),a.d(n,"EVICTIONS",function(){return Ze});var r=a(0),i=a.n(r),c=a(31),o=a.n(c),l=a(9),s=a(10),u=a(13),d=a(11),h=a(12),p=a(8),m=a(197),f=a(22),E=a(48),b=a(145),v=a(40),g=a.n(v),O="anhd-dap-portal--user",j=a(198),y=a.n(j),C=a(25),N=function(e){return{type:e+"_PENDING"}},S=function(e){return{type:e+"_COMPLETE"}},_=function(e){return{type:e+"_CLEAR_ERRORS"}},I=a(55),D="Oops, something went wrong.",T=function(e,t,a){var n="",r="";e.response?(r=e.response.status,500===e.response.status?n=e.response.data.results:e.response.status>200&&(n=function(e,t){if(!t)return D;try{return 400===e?"Incorrect username or password.":401===e?"Please login for access.":404===e?"Not found.":500===e?D:t.detail||t.non_field_errors[0]||t.refresh[0]||D}catch(a){return D}}(e.response.status,e.response.data))):(n=D,r=500),a(function(e,t,a){return{type:e+"_FAILURE",status:t,message:a}}(t,r,n)),I.toast.error("Error: ".concat(r," - ").concat(n)),a(S(t))},R=function(e,t){if(!t)return e;var a=t.type,n=t.value;return[e,a,t.comparison,n,t.sinceDate,t.endDate].filter(function(e){return e}).map(function(e){return e.replace(" ","").toUpperCase()}).join("_")},L=y.a.create({baseURL:"https://api.displacementalert.org",timeout:3e4,headers:{"Content-type":"application/json"}}),A=function(e,t,a,n,r,i){return function(e,t){e(N(t)),e(_(t))}(n,r),L.get(e,{params:Object(p.a)({format:"json"},t),headers:"string"===typeof a?{authorization:"Bearer ".concat(a)}:null}).then(function(e){n(S(r)),n(i(e,r))}).catch(function(e){T(e,r,n)})},k=a(14),x=function(e){return{type:"HANDLE_SYNC_STORAGE",data:e}},F=function(e){return function(t){return t(N("GET_TOKEN_REFRESH")),t(_("GET_TOKEN_REFRESH")),L.post("/api/token/refresh/",{refresh:e}).then(function(e){return w(e.data.access,e.data.refresh,null,t),t(S("GET_TOKEN_REFRESH")),t(x(JSON.parse(localStorage.getItem(O)))),JSON.parse(localStorage.getItem(O))}).catch(function(e){T(e,"GET_TOKEN_REFRESH",t),t(G())})}},P=function(e){return function(t){return t(N("GET_TOKEN")),t(_("GET_TOKEN")),L.post("/api/token/",{username:e.username,password:e.password}).then(function(e){t(S("GET_TOKEN")),w(e.data.access,e.data.refresh,null,t),t(x(JSON.parse(localStorage.getItem(O)))),t(M(function(e,t){e(N("GET_USER_PROFILE")),e(_("GET_USER_PROFILE"));try{return L.get("/users/current/",{headers:{authorization:"Bearer ".concat(t)}}).then(function(t){e(S("GET_USER_PROFILE")),w(null,null,t.data,e),e(x(JSON.parse(localStorage.getItem(O)))),I.toast.success("Welcome, ".concat(t.data.username,"!"))}).catch(function(t){T(t,"GET_USER_PROFILE",e)})}catch(n){var a={response:{status:500,data:{results:a.message}}};T(a,"GET_USER_PROFILE",e)}}))}).catch(function(e){T(e,"GET_TOKEN",t)})}},G=function(){return function(e){localStorage.removeItem(O),e({type:"HANDLE_USER_LOGOUT"}),e(Object(k.d)("/")),I.toast.info("You've been logged out.")}},B=5,H=10,w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;try{e&&(e={token:e,expiration:g()().add(B,"minutes").format()}),t&&(t={token:t,expiration:g()().add(H,"hours").format()});var r={access:e,refresh:t,user:a};for(var i in r)null!==r[i]&&void 0!==r[i]||delete r[i];var c=JSON.parse(localStorage.getItem(O));c=Object(p.a)({},c,r),localStorage.setItem(O,JSON.stringify(c))}catch(o){n(G())}},M=function(e){return{type:"AUTH_REQUEST",request:function(t,a){return e(t,a)}}},U=a(32),V=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.data;return t.length||(t=[{bin:void 0,housenumber:"",street:"No results",borough:""}]),{type:"HANDLE_READ_SEARCH_RESPONSE",data:t}},z={results:[],searchTimeout:void 0},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.freeze(z),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:[]};switch(t.type){case"SET_SEARCH_TIMEOUT":return Object(p.a)({},e,{searchTimeout:t.data});case"HANDLE_READ_SEARCH_RESPONSE":return Object(p.a)({},e,{results:t.data||[]});case"CLEAR_SEARCH":return Object(p.a)({},e,{results:[]});default:return e}},q=a(93),J={},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.freeze(J),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:[]},a=t.type,n=/(.*)_(CLEAR_ERRORS|FAILURE)/.exec(a);if(!n)return e;var r=Object(q.a)(n,3),i=r[1],c=r[2];return Object(p.a)({},e,Object(C.a)({},i,"FAILURE"===c?{status:t.status,message:t.message}:null))},W={},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.freeze(W),t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:[]}).type,a=/(.*)_(PENDING|COMPLETE)/.exec(t);if(!a)return e;var n=Object(q.a)(a,3),r=n[1],i=n[2];return Object(p.a)({},e,Object(C.a)({},r,"PENDING"===i))},Q=function(e,t){return{type:"HANDLE_MODAL_ACTION",data:{type:e,modalProps:t=Object(p.a)({},t,{show:!1})}}},Z={type:void 0,modalProps:{}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.freeze(Z),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:[]};switch(t.type){case"HANDLE_MODAL_ACTION":return Object(p.a)({},e,{type:(t.data||{}).type,modalProps:(t.data||{}).modalProps});default:return e}},ee={user:void 0,access:void 0,refresh:void 0},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.freeze(ee),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:[]};switch(t.type){case"HANDLE_SYNC_STORAGE":return Object(p.a)({},e,{access:(t.data||{}).access,refresh:(t.data||{}).refresh,user:(t.data||{}).user});case"HANDLE_USER_LOGOUT":return Object(p.a)({},ee);default:return e}},ae={districts:void 0,district:void 0,districtHousing:void 0,districtPropertySummaries:{}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.freeze(ae),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:[]};switch(t.type){case"HANDLE_GET_COUNCILS":return Object(p.a)({},e,{districts:t.data});case"HANDLE_GET_COUNCIL":return Object(p.a)({},e,{district:t.data});case"HANDLE_GET_COUNCIL_HOUSING":return Object(p.a)({},e,{districtHousing:t.data});case"HANDLE_GET_COUNCIL_PROPERTY_SUMMARY":return Object(p.a)({},e,{districtPropertySummaries:Object(p.a)({},e.districtPropertySummaries,Object(C.a)({},t.key,t.data))});default:return e}},re={currentBuilding:void 0},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.freeze(re),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:[]};switch(t.type){case"HANDLE_GET_BUILDING":return Object(p.a)({},e,{currentBuilding:t.data});case"HANDLE_GET_BUILDING_RESOURCE":return Object(p.a)({},e,Object(C.a)({},t.key,t.data));default:return e}},ce=a(49),oe={conditions:[{type:"AND",filters:[]}],results:void 0},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.freeze(oe),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:[]};switch(t.type){case"ADD_NEW_CONDITION":var a="AND"===e.conditions[e.conditions.length-1].type?{type:"OR",filters:[]}:{type:"AND",filters:[]},n=e.conditions.slice();return n[t.conditionIndex].filters.push({conditionGroup:t.conditionIndex+1}),Object(p.a)({},e,{conditions:[].concat(Object(ce.a)(n),[a])});case"REMOVE_LAST_CONDITION":var r=e.conditions.slice();return r.pop(),r.length>0&&r[r.length-1].filters.pop(),Object(p.a)({},e,{conditions:r.length?r:[oe.conditions[0]]});case"ADD_FILTER":var i=e.conditions.slice(),c=i[t.conditionIndex];if(c.filters.some(function(e){return e.conditionGroup})){var o=c.filters.pop();c.filters.push(t.filter),c.filters.push(o)}else c.filters.push(t.filter);return Object(p.a)({},e,{conditions:[].concat(Object(ce.a)(i.slice(0,t.conditionIndex)),[c],Object(ce.a)(i.slice(t.conditionIndex+1)))});case"UPDATE_FILTER":var l=e.conditions.slice(),s=l[t.conditionIndex];return s.filters[t.filterIndex]=t.newFilter,Object(p.a)({},e,{conditions:[].concat(Object(ce.a)(l.slice(0,t.conditionIndex)),[s],Object(ce.a)(l.slice(t.conditionIndex+1)))});case"REMOVE_FILTER":var u=e.conditions.slice(),d=u[t.conditionIndex];return d.filters.splice(t.filterIndex,1),Object(p.a)({},e,{conditions:[].concat(Object(ce.a)(u.slice(0,t.conditionIndex)),[d],Object(ce.a)(u.slice(t.conditionIndex+1)))});case"HANDLE_GET_ADVANCED_SEARCH":return Object(p.a)({},e,{results:t.data});default:return e}},se=function(e){return Object(E.c)({router:Object(U.b)(e),error:K,loading:X,modal:$,auth:te,search:Y,council:ne,building:ie,advancedSearch:le})},ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||E.d,de=Object(f.a)(),he=[Object(b.a)(de),m.a,function(e){var t=e.dispatch,a=e.getState;return function(e){return function(n){var r=n.request,i=a().auth;return r?i.refresh?g()()>g()(i.access.expiration).subtract(1,"minutes")?void t(F(i.refresh.token)).then(function(){return i=a().auth,r(t,i.access.token)}).catch(function(){return t(G())}):r(t,i.access.token):r(t):e(n)}}}];var pe=a(202),me=a(149),fe=a(18),Ee=i.a.createContext(void 0),be=a(433),ve=a(431),ge=a(107),Oe=Object(fe.c)(function(e){return{auth:e.auth}})(function(e){return i.a.createElement("div",{className:"header"},i.a.createElement(be.a,{bg:"dark",variant:"dark",expand:"lg"},i.a.createElement(be.a.Brand,{as:"li"},i.a.createElement(ge.a,{className:"text-light",to:"/"},"Home")),i.a.createElement(be.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(be.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(ve.a,{className:"mr-auto"},e.user&&i.a.createElement(ve.a.Link,{as:"li"},i.a.createElement(ge.a,{className:"text-light",to:"/profile"},e.user.username)),e.user?i.a.createElement(ve.a.Link,{as:"li"},i.a.createElement(ge.a,{className:"text-light",to:"/logout"},"Logout")):i.a.createElement(ve.a.Link,{as:"li"},i.a.createElement(ge.a,{className:"text-light",to:"/login"},"Login"))))))}),je=a(423),ye=a(200),Ce=function(e){return i.a.createElement("div",{className:"header"},i.a.createElement(je.a,null,i.a.createElement(ye.a,{sm:12,md:6},i.a.createElement(ve.a,{variant:"tabs",defaultActiveKey:"/buildings"},i.a.createElement(ve.a.Item,null,i.a.createElement(ve.a.Link,{as:"li"},i.a.createElement(ge.a,{to:"/buildings"},"Building Lookup"))),i.a.createElement(ve.a.Item,null,i.a.createElement(ve.a.Link,{as:"li"},i.a.createElement(ge.a,{to:"/districts"},"District Alerts"))),i.a.createElement(ve.a.Item,null,i.a.createElement(ve.a.Link,{as:"li"},i.a.createElement(ge.a,{to:"/search"},"Advanced Search")))))))},Ne=a(424),Se=function(e){return i.a.createElement("div",{className:"layout"},i.a.createElement(Ee.Consumer,null,function(e){return i.a.createElement("div",null,i.a.createElement(Oe,{user:e}),i.a.createElement(Ce,{user:e}))}),i.a.createElement(Ne.a,null,e.children))},_e=a(5),Ie=a(429),De=(a(254),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onFormSubmit=a.onFormSubmit.bind(Object(_e.a)(Object(_e.a)(a))),a.dispatchQuery=a.dispatchQuery.bind(Object(_e.a)(Object(_e.a)(a))),a.onInputChange=a.onInputChange.bind(Object(_e.a)(Object(_e.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.selectedResult&&this.props.setSearchValue("".concat(e.selectedResult.housenumber," ").concat(e.selectedResult.street,", ").concat(e.selectedResult.boroughName))}},{key:"onFormSubmit",value:function(e){e.preventDefault(),this.props.dispatchSelectedBuildingResult()}},{key:"dispatchQuery",value:function(e){this.props.dispatch(M(function(e){return function(t,a){return A("/search/buildings/",{fts:e},a,t,"GET_BUILDING_SEARCH",V)}}(e)))}},{key:"onInputChange",value:function(e){this.props.clearSelectedSearch(),this.props.setSearchValue(e.target.value),clearTimeout(this.props.searchTimeout),e.target.value&&this.props.dispatch(function(e){return{type:"SET_SEARCH_TIMEOUT",data:e}}(setTimeout(this.dispatchQuery,250,e.target.value)))}},{key:"render",value:function(){return i.a.createElement("div",{className:"search-bar"},i.a.createElement(Ie.a,{autoComplete:"off",className:"search-form",onSubmit:this.onFormSubmit},i.a.createElement(Ie.a.Label,null,"Search an address"),i.a.createElement(Ie.a.Control,{size:"lg",onChange:this.onInputChange,placeholder:"Type an address to search",tabIndex:0,type:"text",value:this.props.searchValue})))}}]),t}(i.a.Component)),Te=function(){return i.a.createElement("svg",{className:"svg-icon",viewBox:"0 0 20 20"},i.a.createElement("path",{className:"svg-icon-primary-color",d:"M10.001,6.54c-0.793,0-1.438,0.645-1.438,1.438c0,0.792,0.645,1.435,1.438,1.435c0.791,0,1.435-0.644,1.435-1.435C11.437,7.184,10.792,6.54,10.001,6.54z M10.001,8.454c-0.264,0-0.479-0.213-0.479-0.476c0-0.265,0.215-0.479,0.479-0.479c0.263,0,0.477,0.214,0.477,0.479C10.478,8.241,10.265,8.454,10.001,8.454z"}),i.a.createElement("path",{className:"svg-icon-primary-color",d:"M10,3.021c-2.815,0-5.106,2.291-5.106,5.106c0,0.781,0.188,1.549,0.562,2.282c0.011,0.062,0.036,0.12,0.07,0.174l0.125,0.188c0.074,0.123,0.151,0.242,0.225,0.341l3.727,5.65c0.088,0.135,0.238,0.215,0.399,0.215c0.161,0,0.311-0.08,0.4-0.215l3.752-5.68c0.057-0.08,0.107-0.159,0.153-0.232l0.132-0.199c0.033-0.05,0.054-0.104,0.064-0.159c0.401-0.757,0.605-1.551,0.605-2.366C15.107,5.312,12.815,3.021,10,3.021z M13.596,10.152c-0.017,0.03-0.029,0.062-0.039,0.095l-0.056,0.084c-0.043,0.066-0.085,0.133-0.139,0.211L10,15.629l-3.339-5.061c-0.068-0.095-0.132-0.193-0.203-0.309l-0.051-0.078c-0.009-0.031-0.021-0.061-0.038-0.089C6.026,9.458,5.852,8.796,5.852,8.127c0-2.287,1.861-4.148,4.147-4.148c2.288,0,4.149,1.861,4.149,4.148C14.148,8.823,13.963,9.503,13.596,10.152z"}))},Re=function(){return i.a.createElement("svg",{className:"svg-icon",viewBox:"0 0 20 20"},i.a.createElement("path",{className:"svg-icon-primary-color",width:"100%",height:"100%",d:"M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"}))},Le=a(96),Ae=(a(257),function(e){return e.result.bin&&!e.result.alternateaddress?i.a.createElement("tr",{className:"search-result-row"},i.a.createElement("td",null,i.a.createElement(Re,null)),i.a.createElement(Le.LinkContainer,{to:"/buildings/".concat(e.result.bin)},i.a.createElement("td",null,"".concat(e.result.buildingnumber," ").concat(e.result.buildingstreet,", ").concat(e.result.borough)))):e.result.bin&&e.result.alternateaddress?i.a.createElement("tr",{className:"search-result-row"},i.a.createElement("td",null,i.a.createElement(Te,null),i.a.createElement(Re,null)),i.a.createElement(Le.LinkContainer,{to:"/buildings/".concat(e.result.bin)},i.a.createElement("td",null,"".concat(e.result.propertyaddress,", ").concat(e.result.borough),i.a.createElement("br",null),"Alt Address: ".concat(e.result.buildingnumber," ").concat(e.result.buildingstreet,", ").concat(e.result.borough)))):e.result.alternateaddress?i.a.createElement("tr",{className:"search-result-row"},i.a.createElement("td",null,i.a.createElement(Te,null)),i.a.createElement(Le.LinkContainer,{to:"/properties/".concat(e.result.bbl)},i.a.createElement("td",null,"Property address: ".concat(e.result.propertyaddress," - ").concat(e.result.borough)))):i.a.createElement("tr",{className:"search-result-row"},i.a.createElement("td",null,"No results."))}),ke=(a(259),a(425)),xe=function(e){return i.a.createElement("div",null,e.loading&&i.a.createElement("div",{className:"text-info"},"loading"),e.error&&i.a.createElement("div",{className:"text-danger"},e.error.message),i.a.createElement(ke.a,{className:"search-results",size:"sm",bordered:!0,hover:!0},i.a.createElement("tbody",null,!!e.results.length&&e.results.map(function(t,a){return i.a.createElement(Ae,{selectBuildingResult:e.selectBuildingResult,key:"result-".concat(a),result:t})}))))},Fe=function(e){return function(t){return e.some(function(e){return t.loading[e]})}},Pe=function(e){return function(t){return e.map(function(e){return t.error[e]}).filter(function(e){return e})[0]}},Ge=(a(261),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).selectBuildingResult=a.selectBuildingResult.bind(Object(_e.a)(Object(_e.a)(a))),a.dispatchSelectedBuildingResult=a.dispatchSelectedBuildingResult.bind(Object(_e.a)(Object(_e.a)(a))),a.clearSelectedSearch=a.clearSelectedSearch.bind(Object(_e.a)(Object(_e.a)(a))),a.setSearchValue=a.setSearchValue.bind(Object(_e.a)(Object(_e.a)(a))),a.state={selectedResult:null,searchValue:""},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"setSearchValue",value:function(e){e||(this.props.dispatch(_("GET_BUILDING_SEARCH")),this.props.dispatch({type:"CLEAR_SEARCH"})),this.setState({searchValue:e})}},{key:"clearSelectedSearch",value:function(){this.setState({selectedResult:null}),this.props.dispatch({type:"CLEAR_SEARCH"})}},{key:"selectBuildingResult",value:function(e){this.setState({selectedResult:e}),this.dispatchSelectedBuildingResult(e)}},{key:"dispatchSelectedBuildingResult",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.state.selectedResult||this.props.search.results[0];e&&(this.setState({selectedResult:e}),this.props.dispatch({type:"CLEAR_SEARCH"}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"search-module"},i.a.createElement(De,{clearSelectedSearch:this.clearSelectedSearch,dispatch:this.props.dispatch,dispatchSelectedBuildingResult:this.dispatchSelectedBuildingResult,searchTimeout:this.props.search.searchTimeout,selectBuildingResult:this.selectBuildingResult,selectedResult:this.state.selectedResult,searchValue:this.state.searchValue,setSearchValue:this.setSearchValue}),i.a.createElement(xe,{loading:this.props.loading,error:this.props.error,selectBuildingResult:this.selectBuildingResult,results:this.props.search.results}))}}]),t}(i.a.Component)),Be=Fe(["GET_BUILDING_SEARCH"]),He=Pe(["GET_BUILDING_SEARCH"]),we=Object(fe.c)(function(e){return{search:e.search,loading:Be(e),error:He(e)}})(Ge),Me=function(e){function t(e){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,e))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(Se,null,i.a.createElement(we,null))}}]),t}(i.a.Component),Ue=Object(fe.c)(function(e){return{auth:e.auth,path:e.router.location.pathname}})(Me),Ve=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"HANDLE_GET_BUILDING",data:e.data}},ze=function(e){return{type:"HANDLE_GET_BUILDING_RESOURCE",key:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,data:e.data}},Ye=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(n,r){var i=R(e.constant,a);return A("".concat("/buildings/").concat(t).concat(e.url),null,r,n,i,ze)}},qe={fields:[{type:"INTEGER",options:[{value:"gte",label:"At Least"},{value:"exact",label:"Exactly"},{value:"lte",label:"At Most"}]},{type:"DATE",options:[{value:"range",label:"From/To"},{value:"startDate",label:"Since"},{value:"endDate",label:"Before"}]}]},Je={name:"HPD Violations",queryName:"hpdviolations",url:"/hpdviolations/",constant:"HPD_VIOLATIONS",dateField:function(){return"approveddate"},amountField:function(){return"count"},filter:qe,defaultFilterValues:{comparison:"gte",value:"10",startDate:"2018-01-01"}},Ke={name:"DOB Violations",queryName:"dobviolations",url:"/dobviolations/",constant:"DOB_VIOLATIONS",dateField:function(){return"issuedate"},amountField:function(){return"count"},filter:qe,defaultFilterValues:{comparison:"gte",value:"10",startDate:"2018-01-01"}},We={name:"ECB Violations",queryName:"ecbviolations",url:"/ecbviolations/",constant:"ECB_VIOLATIONS",dateField:function(){return"issuedate"},amountField:function(){return"count"},filter:qe,defaultFilterValues:{comparison:"gte",value:"10",startDate:"2017-01-01"}},Xe={name:"HPD Complaints",queryName:"hpdcomplaints",url:"/hpdcomplaints/",constant:"HPD_COMPLAINTS",dateField:function(){return"receiveddate"},amountField:function(){return"count"},filter:qe,defaultFilterValues:{comparison:"gte",value:"10",startDate:"2017-01-01"}},Qe={name:"DOB Complaints",queryName:"dobcomplaints",url:"/dobcomplaints/",constant:"DOB_COMPLAINTS",dateField:function(){return"dateentered"},amountField:function(){return"count"},filter:qe,defaultFilterValues:{comparison:"gte",value:"10",startDate:"2017-01-01"}},Ze={name:"Evictions",queryName:"evictions",url:"/evictions/",constant:"EVICTIONS",dateField:function(){return"executeddate"},amountField:function(){return"count"},filter:qe,defaultFilterValues:{comparison:"gte",value:"1",startDate:"2017-01-01"}},$e=function(e,t){return e.id!==t.id},et=a(434),tt=a(432),at=(a(263),[40.71,-73.98]),nt=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"map"},i.a.createElement(et.a,{doubleClickZoom:!1,id:"leaflet-map",minZoom:13,maxZoom:20,ref:this.props.mapRef,zoomControl:!1,className:"map",center:at,zoom:13},i.a.createElement(tt.a,{attribution:"mapbox",url:"https://api.mapbox.com/styles/v1/starcat/cjrik99zl9yae2so1gjksdn9x/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic3RhcmNhdCIsImEiOiJjamlpYmlsc28wbjlmM3FwbXdwaXozcWEzIn0.kLmWiUbmdqNLA1atmnTXXA"})))}}]),t}(r.Component),rt=a(426),it=a(204),ct=a.n(it),ot=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getRecords=a.getRecords.bind(Object(_e.a)(Object(_e.a)(a))),a.getRecords(e),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.getRecords(e)}},{key:"getRecords",value:function(e){(e.loading||e.error||e.records)&&!$e(this.props,e)||e.dispatch(M(e.recordsFetch(e.dataset,e.id,e.urlParams)))}},{key:"render",value:function(){return i.a.createElement("div",{className:"records-fetch-module"},this.props.render(this.props.title,this.props.records,this.props.loading,this.props.error))}}]),t}(i.a.Component),lt=Object(fe.c)(function(e,t){var a=Fe([R(t.dataset.constant,t.urlParams)]),n=Pe([R(t.dataset.constant,t.urlParams)]),r=void 0;try{r=ct()(e,"".concat(t.reducerPath))}catch(i){return}return{loading:a(e),error:n(e),records:r||void 0}})(ot),st=(a(266),function(e){return i.a.createElement("div",{className:"loading"},"Loading")}),ut=function(e){return i.a.createElement("div",{className:"building-history-table"},i.a.createElement(rt.a,{style:{maxHeight:"500px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},i.a.createElement("h4",null,e.title),e.loading&&i.a.createElement(st,null),e.error&&i.a.createElement("div",null,e.error.message),!(e.loading||e.error)&&i.a.createElement("div",null,i.a.createElement("h5",null,"Total: ",(e.records||{}).length),JSON.stringify(e.records,null,2))))},dt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).fetchBuildingById=a.fetchBuildingById.bind(Object(_e.a)(Object(_e.a)(a))),e.id&&!e.loading&&a.fetchBuildingById(e),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.id&&!e.loading&&this.fetchBuildingById(e)}},{key:"fetchBuildingById",value:function(e){var t;(e.building||{}).currentBuilding&&!$e(this.props,e)||e.dispatch(M((t=e.id,function(e,a){return A("".concat("/buildings/").concat(t),null,a,e,"GET_BUILDING",Ve)})))}},{key:"render",value:function(){return i.a.createElement(Se,null,i.a.createElement("h1",null,"Building Lookup"),i.a.createElement(je.a,null,i.a.createElement(ye.a,{sm:12,md:5},i.a.createElement(we,null),i.a.createElement(nt,null)),i.a.createElement(ye.a,{sm:12,md:7},i.a.createElement("h2",null,"Building Info"),i.a.createElement(rt.a,{style:{maxHeight:"500px"}},this.props.loading?i.a.createElement("div",null,"Loading"):JSON.stringify(this.props.building.currentBuilding,null,2)),i.a.createElement("h2",null,"Building History"),i.a.createElement(lt,{id:this.props.id,dataset:Je,recordsFetch:Ye,reducerPath:"building.".concat(Je.constant),render:function(e,t,a,n){return i.a.createElement(ut,{loading:a,error:n,title:e,records:t})},title:"HPD Violations"}),i.a.createElement(lt,{id:this.props.id,dataset:Ke,recordsFetch:Ye,reducerPath:"building.".concat(Ke.constant),render:function(e,t,a,n){return i.a.createElement(ut,{loading:a,error:n,title:e,records:t})},title:"DOB Violations"}))))}}]),t}(i.a.Component),ht=Fe(["GET_BUILDING"]),pt=Pe(["GET_BUILDING"]),mt=Object(fe.c)(function(e){var t=Object(U.c)({path:"/buildings/:id"})(e);return{id:t?t.params.id:null,building:e.building,loading:ht(e),error:pt(e)}})(dt),ft=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"HANDLE_GET_COUNCILS",data:e.data}},Et=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"HANDLE_GET_COUNCIL",data:e.data}},bt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"HANDLE_GET_COUNCIL_PROPERTY_SUMMARY",data:e.data,key:t}},vt=function(e,t,a){return function(n,r){var i=R(e.constant,a);return A("".concat("/councils/").concat(t).concat("/properties/"),function(e){var t;return t={},Object(C.a)(t,"".concat(e.type,"__").concat(e.comparison),e.value),Object(C.a)(t,"".concat(e.type,"__start"),e.startDate),Object(C.a)(t,"".concat(e.type,"__end"),e.endDate),t}(a),r,n,i,bt)}},gt=a(94),Ot=function(e){return i.a.createElement("div",{className:"district-map-show"},i.a.createElement(lt,{id:e.id,dataset:Je,recordsFetch:vt,reducerPath:"council.districtPropertySummaries.".concat(R(Je.constant,{type:Je.queryName,comparison:"gte",value:"10",startDate:"2017-01-31"})),render:function(e,t,a,n){return i.a.createElement(ut,{title:e,records:t,loading:a,error:n})},title:"Properties with +10 HPD Violations Last Month",urlParams:{type:Je.queryName,comparison:"gte",value:"10",startDate:"2019-01-01"}}))},jt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).fetchCouncils=a.fetchCouncils.bind(Object(_e.a)(Object(_e.a)(a))),a.fetchCouncilById=a.fetchCouncilById.bind(Object(_e.a)(Object(_e.a)(a))),a.handleDistrictChange=a.handleDistrictChange.bind(Object(_e.a)(Object(_e.a)(a))),a.syncToStore=a.syncToStore.bind(Object(_e.a)(Object(_e.a)(a))),a.fetchCouncils(e),a.fetchCouncilById(e),a.syncToStore(e),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.fetchCouncils(e),this.fetchCouncilById(e),this.syncToStore(e)}},{key:"fetchCouncils",value:function(e){e.loading||(e.districts||{}).length||e.error||this.props.dispatch(function(e,t){return A("/councils/",null,t,e,"GET_COUNCILS",ft)})}},{key:"syncToStore",value:function(e){!e.id&&e.district&&this.handleDistrictChange({value:e.district.coundist})}},{key:"fetchCouncilById",value:function(e){var t;!e.id||e.loading||(e.district||e.error)&&!$e(this.props,e)||this.props.dispatch((t=e.id,function(e,a){return A("".concat("/councils/").concat(t,"/"),null,a,e,"GET_COUNCIL",Et)}))}},{key:"handleDistrictChange",value:function(e){this.props.dispatch(Object(k.d)("/districts/".concat(e.value)))}},{key:"render",value:function(){var e=this.props.districts?this.props.districts.map(function(e){return{value:e.coundist,label:"District ".concat(e.coundist)}}):[];return i.a.createElement(Se,null,i.a.createElement(je.a,null,i.a.createElement(ye.a,{sm:12,md:4},i.a.createElement("h1",null,"District Map"),i.a.createElement(nt,null),i.a.createElement(Ie.a.Group,null,i.a.createElement(Ie.a.Label,null,"Select your district"),i.a.createElement(gt.a,{options:e,onChange:this.handleDistrictChange}))),i.a.createElement(ye.a,{sm:12,md:8},i.a.createElement("div",{style:{maxHeight:"400px",overflow:"scroll"}},JSON.stringify(this.props.district,null,2)),this.props.id&&i.a.createElement(Ot,{id:this.props.id}))))}}]),t}(i.a.Component),yt=Fe(["GET_COUNCILS"]),Ct=Pe(["GET_COUNCILS"]),Nt=Object(fe.c)(function(e){var t=Object(U.c)({path:"/districts/:id"})(e);return{districts:e.council.districts,district:e.council.district,districtHousing:e.council.districtHousing,loading:yt(e),error:Ct(e),id:t?t.params.id:null}})(jt),St=function(e){return e.map(function(e,t){return"*condition_".concat(t,"=").concat(e.type," ").concat(e.filters.map(function(e,t){var a="filter_".concat(t);return e.conditionGroup?"".concat(a,"=condition_").concat(e.conditionGroup):"".concat(a,"=").concat(function(e){var t=[],a=e.dataset,n=e.comparison,r=e.value,i=e.startDate,c=e.endDate;return(i||c)&&t.push(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=[];return t&&n.push("".concat(e.queryName,"__").concat(e.dateField(),"__gte=").concat(t)),a&&n.push("".concat(e.queryName,"__").concat(e.dateField(),"__lte=").concat(a)),n.join(",")}(a,i,c)),t.push(function(e,t,a){return"".concat(e.queryName,"__").concat(e.amountField(),"__").concat(t,"=").concat(a)}(a,n,r)),t.join(",")}(e))}).join(" "))}).join(" ")},_t=function(e){var t=[],a=e.dataset,n=e.comparison,r=e.value,i=e.startDate,c=e.endDate;return t.push(function(e,t,a){return"".concat(function(e){switch(e){case"gte":return"at least";case"exact":return"exactly";case"lte":return"at most"}}(t)," ").concat(a," ").concat(e.name)}(a,n,r)),(i||c)&&t.push(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t&&a?"from ".concat(g()(t).format("MM/DD/YYYY")," to ").concat(g()(a).format("MM/DD/YYYY")):t?"since ".concat(g()(t).format("MM/DD/YYYY")):a?"before ".concat(g()(a).format("MM/DD/YYYY")):void 0}(a,i,c)),t.join(" ")},It=function(e){return e.length&&e[0].filters.length?"Show me properties that have ".concat(e.map(function(t,a){return"".concat(function(e){return e.filters.filter(function(e){return!e.conditionGroup}).map(function(e){return"".concat(_t(e))}).join("AND"===e.type?" and ":" or ")}(t)).concat(e.length>1&&a!==e.length-1?function(e){return"AND"===e.type?" and that either have":" or that have"}(t):"")}).join(" "),"."):"Show me properties that have..."},Dt=function(e){return{type:"HANDLE_GET_ADVANCED_SEARCH",data:e.data}},Tt=function(e){return i.a.createElement("div",{className:"advanced-search-sentence"},It(e.conditions))},Rt=a(427),Lt=function(e){switch(e){case"sm":return{control:function(e){return Object(p.a)({},e,{height:38,"min-height":38})},container:function(e){return Object(p.a)({},e,{"min-height":38,height:38})},valueContainer:function(e){return Object(p.a)({},e,{"min-height":38,height:38})}}}},At=function(e){return i.a.createElement(gt.a,Object.assign({},e,{styles:Lt(e.size)}))},kt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).startingConfig="startDate",a.state={config:a.chooseDateConfig(a.props.filterValues)},a.renderDateConfig=a.renderDateConfig.bind(Object(_e.a)(Object(_e.a)(a))),a.chooseDateConfig=a.chooseDateConfig.bind(Object(_e.a)(Object(_e.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"chooseDateConfig",value:function(e){return e.startDate&&e.endDate?"range":e.startDate?"startDate":e.endDate?"endDate":void 0}},{key:"renderDateConfig",value:function(e){switch(this.state.config){case"startDate":return i.a.createElement(Ie.a.Control,{name:"startDate",onChange:this.props.onChange,size:"sm",type:"date",value:e.startDate});case"endDate":return i.a.createElement(Ie.a.Control,{name:"endDate",onChange:this.props.onChange,type:"date",size:"sm",value:e.endDate});default:return i.a.createElement(je.a,null,i.a.createElement(ye.a,{md:"6"},i.a.createElement(Ie.a.Control,{name:"startDate",onChange:this.props.onChange,size:"sm",type:"date",value:e.startDate})," "),i.a.createElement(ye.a,{md:"6"},i.a.createElement(Ie.a.Control,{name:"endDate",onChange:this.props.onChange,size:"sm",type:"date",value:e.endDate})))}}},{key:"render",value:function(){var e=this;return i.a.createElement(ye.a,{md:"12"},i.a.createElement(je.a,null,i.a.createElement(ye.a,{md:"3"},i.a.createElement(At,{options:this.props.field.options,onChange:function(t){return e.setState({config:t.value})},size:"sm",value:this.props.field.options.find(function(t){return t.value===e.state.config})})),i.a.createElement(ye.a,{md:"9",className:"date-field"},this.renderDateConfig(this.props.filterValues))))}}]),t}(i.a.Component),xt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).initialState={creatingFilter:!1,dataset:a.props.dataset,filterModel:a.props.filterModel,filter:a.props.filter},a.state=a.initialState,a.constructFilter=a.constructFilter.bind(Object(_e.a)(Object(_e.a)(a))),a.removeFilter=a.removeFilter.bind(Object(_e.a)(Object(_e.a)(a))),a.submitFilter=a.submitFilter.bind(Object(_e.a)(Object(_e.a)(a))),a.updateFilter=a.updateFilter.bind(Object(_e.a)(Object(_e.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"constructFilter",value:function(e){this.setState({dataset:e,filterModel:e.filter,filter:e.defaultFilterValues})}},{key:"removeFilter",value:function(){var e,t;this.props.dispatch((e=this.props.conditionIndex,t=this.props.filterIndex,{type:"REMOVE_FILTER",conditionIndex:e,filterIndex:t}))}},{key:"submitFilter",value:function(e){e.preventDefault(),e.stopPropagation();var t=Array.from(e.currentTarget.elements),a={};t.filter(function(e){return e.name}).forEach(function(e){a[e.name]=e.value}),a.dataset=this.state.dataset,this.props.dispatch(function(e,t){return{type:"ADD_FILTER",filter:t,conditionIndex:e}}(this.props.conditionIndex,a)),this.setState(this.initialState)}},{key:"updateFilter",value:function(e){e.preventDefault&&(e.preventDefault(),e.stopPropagation(),e=e.currentTarget),this.setState(Object(p.a)({},this.state,{filter:Object(p.a)({},this.state.filter,Object(C.a)({},e.name,e.value))}))}},{key:"render",value:function(){var e=this,t=Object.entries(n).map(function(e){return{value:e[1],label:e[1].name}});return i.a.createElement("div",{className:"filter"},i.a.createElement(Ie.a,{className:"filter",onSubmit:this.submitFilter},i.a.createElement(Ie.a.Row,null,this.state.creatingFilter&&i.a.createElement(ye.a,{md:"3"},i.a.createElement(At,{options:t,onChange:function(t){return e.constructFilter(t.value)},size:"sm"})),this.props.filter&&i.a.createElement(Ie.a.Label,{column:!0},this.state.dataset.name),this.state.dataset&&i.a.createElement("input",{type:"hidden",value:this.state.dataset.queryName}),this.state.filterModel&&this.state.filterModel.fields.map(function(t,a){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;switch(e.type){case"INTEGER":return i.a.createElement(Ie.a.Group,{key:"filterField-".concat(n),as:ye.a,md:"3"},i.a.createElement(je.a,null,i.a.createElement(ye.a,{md:"8"},i.a.createElement(At,{name:"comparison",options:e.options,onChange:function(e){return a({name:"comparison",value:e.value})},size:"sm",value:e.options.find(function(e){return e.value===t.comparison})})),i.a.createElement(ye.a,{md:"4"},i.a.createElement(Ie.a.Control,{name:"value",onChange:a,size:"sm",type:"number",value:t.value}))));case"DATE":return i.a.createElement(ye.a,{md:"6"},i.a.createElement(kt,{key:"filterField-".concat(n),field:e,filterValues:t,onChange:a}))}}(t,e.state.filter,e.updateFilter,a)}),this.state.filterModel&&this.state.creatingFilter&&i.a.createElement(Rt.a,{type:"submit"},"Create"))),!this.state.creatingFilter&&!this.state.filter&&i.a.createElement(Rt.a,{onClick:function(){return e.setState({creatingFilter:!0})},variant:"outline-success"},"Add Filter"),this.props.filter&&i.a.createElement(Rt.a,{onClick:this.removeFilter,variant:"outline-danger"},"Remove Filter"))}}]),t}(i.a.Component),Ft=(a(271),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).addCondition=a.addCondition.bind(Object(_e.a)(Object(_e.a)(a))),a.removeCondition=a.removeCondition.bind(Object(_e.a)(Object(_e.a)(a))),a.containsCondition=a.containsCondition.bind(Object(_e.a)(Object(_e.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"addCondition",value:function(){this.props.dispatch({type:"ADD_NEW_CONDITION",conditionIndex:this.props.index})}},{key:"removeCondition",value:function(){this.props.dispatch({type:"REMOVE_LAST_CONDITION"})}},{key:"containsCondition",value:function(){return this.props.condition.filters.find(function(e){return e.conditionGroup})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"condition"},i.a.createElement("h1",null,this.props.condition.type),!this.containsCondition()&&i.a.createElement(Rt.a,{onClick:function(){return e.addCondition()},variant:"outline-primary"},"Add Condition"),0!==this.props.index&&this.props.index===this.props.conditions.length-1&&i.a.createElement(Rt.a,{onClick:function(){return e.props.dispatch({type:"REMOVE_LAST_CONDITION"})},variant:"outline-danger"},"Remove Condition"),this.props.condition.filters.map(function(a,r){return function(a,r){return a.conditionGroup?i.a.createElement(t,{key:"condition-".concat(e.props.index+1),conditions:e.props.conditions,condition:e.props.conditions[e.props.index+1],dispatch:e.props.dispatch,index:e.props.index+1}):i.a.createElement(xt,{conditionIndex:e.props.index,dataset:Object.entries(n).find(function(e){return e[1]==a.dataset})[1],dispatch:e.props.dispatch,filter:a,filterIndex:r,filterModel:Object.entries(n).find(function(e){return e[1]==a.dataset})[1].filter,key:"filter-".concat(e.props.index,"-").concat(a.dataset.name)})}(a,r)}),i.a.createElement(xt,{dispatch:this.props.dispatch,conditionIndex:this.props.index}))}}]),t}(i.a.Component)),Pt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).submitSearch=a.submitSearch.bind(Object(_e.a)(Object(_e.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"submitSearch",value:function(e){var t;e.preventDefault(),e.stopPropagation(),this.props.dispatch(M((t=this.props.advancedSearch.conditions,function(e,a){return A("".concat("/properties/"),{q:St(t)},a,e,"GET_ADVANCED_SEARCH",Dt)})))}},{key:"render",value:function(){return i.a.createElement(Se,null,i.a.createElement("h1",null,"Advanced Search"),i.a.createElement(Tt,{conditions:this.props.advancedSearch.conditions}),i.a.createElement(ut,{loading:this.props.loading,error:this.props.error,title:"Search Results",records:this.props.advancedSearch.results}),i.a.createElement(Ft,{conditions:this.props.advancedSearch.conditions,condition:this.props.advancedSearch.conditions[0],dispatch:this.props.dispatch,key:"condition-0",index:0}),i.a.createElement(Rt.a,{onClick:this.submitSearch,type:"submit",variant:"primary"},"Submit"))}}]),t}(i.a.Component),Gt=Fe(["GET_ADVANCED_SEARCH"]),Bt=Pe(["GET_ADVANCED_SEARCH"]),Ht=Object(fe.c)(function(e){return{advancedSearch:e.advancedSearch,error:Bt(e),loading:Gt(e)}})(Pt),wt=a(435),Mt=a(428),Ut=function(e){function t(e){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,e))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(wt.a,{bg:"light",className:"page404 text-center",style:{margin:"0 auto",width:"20rem"}},i.a.createElement(wt.a.Img,{variant:"top",src:"https://cdn4.iconfinder.com/data/icons/office-vol-2-5/48/Office-14-512.png"}),i.a.createElement(wt.a.Body,null,i.a.createElement(wt.a.Title,null,"Oops! 404 Not Found."),i.a.createElement(wt.a.Text,null,"Sorry, an error has occured, Requested page not found!"),i.a.createElement(Mt.a,null,i.a.createElement(Rt.a,{href:"/",variant:"primary"},i.a.createElement("span",{className:"glyphicon glyphicon-home"}),"Take Me Home"," "),i.a.createElement(Rt.a,{href:"/contact",variant:"secondary"},i.a.createElement("span",{className:"glyphicon glyphicon-envelope"})," Contact Support"," "))))}}]),t}(i.a.Component),Vt=Object(fe.c)(function(e){return{store:e}})(Ut),zt=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(U.a,{history:de},i.a.createElement(pe.a,null,i.a.createElement(me.a,{exact:!0,path:"/",render:function(){return i.a.createElement(Ue,null)}}),i.a.createElement(me.a,{exact:!0,path:"/buildings/",render:function(){return i.a.createElement(mt,null)}}),i.a.createElement(me.a,{exact:!0,path:"/buildings/:id",render:function(){return i.a.createElement(mt,null)}}),i.a.createElement(me.a,{exact:!0,path:"/districts",render:function(){return i.a.createElement(Nt,null)}}),i.a.createElement(me.a,{exact:!0,path:"/districts/:id",render:function(){return i.a.createElement(Nt,null)}}),i.a.createElement(me.a,{exact:!0,path:"/search",render:function(){return i.a.createElement(Ht,null)}}),i.a.createElement(me.a,{exact:!0,path:"/login",render:function(){return i.a.createElement(Ue,{showLoginModal:!0})}}),i.a.createElement(me.a,{exact:!0,path:"/logout",render:function(){return i.a.createElement(Ue,null)}}),i.a.createElement(me.a,{render:function(){return i.a.createElement(Vt,null)}})))}}]),t}(i.a.Component),Yt=a(430),qt=(a(273),function(e){return i.a.createElement(Yt.a,{"aria-labelledby":e.labelId,centered:e.centered,className:e.className,dialogClassName:e.dialogClassName,onHide:e.onHide,show:e.show,size:e.size},i.a.createElement(Yt.a.Header,{closeButton:!0},i.a.createElement(Yt.a.Title,{id:e.labelId},e.title)),i.a.createElement(Yt.a.Body,null,e.children),e.modalFooter)});qt.defaultProps={className:"modal",title:"Modal Title"};var Jt,Kt=qt,Wt=a(212),Xt=a(100),Qt=Xt.object({username:Xt.string().required(),password:Xt.string().required()}),Zt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={validated:!1},a.handleSubmit=a.handleSubmit.bind(Object(_e.a)(Object(_e.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget;if(!1!==t.checkValidity()){this.setState({validated:!0});var a={username:t.elements.loginUsername.value,password:t.elements.loginPassword.value};this.props.dispatch(P(a))}}},{key:"render",value:function(){var e=this;return i.a.createElement(Wt.a,{validationSchema:Qt},function(t){var a=t.handleChange,n=t.handleBlur,r=t.touched,c=t.errors;return i.a.createElement(Ie.a,{className:"auth-login-form",validated:e.state.validated,onSubmit:function(t){return e.handleSubmit(t)}},e.props.error&&i.a.createElement(Ie.a.Text,{className:"text-danger",type:"invalid"},e.props.error.message),i.a.createElement(Ie.a.Group,{controlId:"loginUsername"},i.a.createElement(Ie.a.Label,null,"Username"),i.a.createElement(Ie.a.Control,{required:!0,name:"username",onChange:a,onBlur:n,isValid:r.username&&!c.username,isInvalid:r.username&&c.username,type:"text",placeholder:"Enter username"}),r.username&&c.username&&i.a.createElement(Ie.a.Text,{className:"text-danger",type:"invalid"},c.username)),i.a.createElement(Ie.a.Group,{controlId:"loginPassword"},i.a.createElement(Ie.a.Label,null,"Password"),i.a.createElement(Ie.a.Control,{required:!0,name:"password",onChange:a,onBlur:n,isValid:r.password&&!c.password,placeholder:"Password",type:"password"}),r.password&&c.password&&i.a.createElement(Ie.a.Text,{className:"text-danger",type:"invalid"},c.password)),i.a.createElement(Rt.a,{disabled:e.props.loading,variant:"primary",type:"submit"},"Submit"))})}}]),t}(i.a.Component),$t=function(e){return i.a.createElement(Kt,{centered:!0,className:"auth-login-modal",labelId:e.labelId,modalFooter:e.modalFooter,onHide:e.onHide,show:e.show,title:"Login"},i.a.createElement(Zt,{dispatch:e.dispatch,error:e.error,loading:e.loading}))},ea=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(u.a)(this,Object(d.a)(t).call(this,e)),e.auth&&e.auth.refresh&&e.dispatch(F(e.auth.refresh.token)),a.openLoginModal=a.openLoginModal.bind(Object(_e.a)(Object(_e.a)(a))),a.hideModal=a.hideModal.bind(Object(_e.a)(Object(_e.a)(a))),a.handleLoginPath=a.handleLoginPath.bind(Object(_e.a)(Object(_e.a)(a))),a.handleLogoutPath=a.handleLogoutPath.bind(Object(_e.a)(Object(_e.a)(a))),a.handleLoginPath(e),a.handleLogoutPath(e),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.handleLoginPath(e),this.handleLogoutPath(e),e.auth.user&&(e.dispatch(Q($t)),"/login"===e.path&&e.dispatch(Object(k.d)("/")))}},{key:"handleLoginPath",value:function(e){e.auth.user?(e.dispatch(Q($t)),"/login"===e.path&&e.dispatch(Object(k.d)("/"))):"/login"===e.path&&this.openLoginModal(e)}},{key:"handleLogoutPath",value:function(e){"/logout"===e.path&&(e.dispatch(G()),e.dispatch(Object(k.d)("/login")))}},{key:"hideModal",value:function(){this.props.dispatch(_("GET_TOKEN")),this.props.dispatch(_("GET_USER_PROFILE")),this.props.dispatch(Q($t)),"/login"===this.props.path&&this.props.dispatch(Object(k.d)("/"))}},{key:"openLoginModal",value:function(e){var t,a;e.dispatch((t=$t,a={onHide:this.hideModal,dispatch:e.dispatch,error:e.loginError,loading:e.loginLoading},{type:"HANDLE_MODAL_ACTION",data:{type:t,modalProps:a=Object(p.a)({},a,{show:!0})}}))}},{key:"render",value:function(){return i.a.createElement(Ee.Provider,{value:this.props.auth.user},this.props.children)}}]),t}(i.a.Component),ta=Pe(["GET_TOKEN","GET_USER_PROFILE"]),aa=Fe(["GET_TOKEN","GET_USER_PROFILE"]),na=Object(fe.c)(function(e){return{auth:e.auth,loginError:ta(e),loginLoading:aa(e),path:e.router.location.pathname}})(ea),ra=function(e){function t(e){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,e))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"modal-container"},this.props.render?this.props.render(this.props.modal.modalProps):null)}}]),t}(i.a.Component),ia=Object(fe.c)(function(e){return{modal:e.modal,render:e.modal.type?function(t){return e.modal.type(t)}:null}})(ra),ca=(a(416),Jt=Object(p.a)({},function(){try{var e=JSON.parse(localStorage.getItem(O))||void 0;return{auth:{user:e.user,access:e.access,refresh:e.refresh}}}catch(t){return}}()),Object(E.e)(se(de),Jt,ue(E.a.apply(void 0,he)))),oa=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(fe.a,{store:ca},i.a.createElement(na,null,i.a.createElement(zt,null),i.a.createElement(I.ToastContainer,null),i.a.createElement(ia,null))))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(418);o.a.render(i.a.createElement(oa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[214,2,1]]]);
//# sourceMappingURL=main.4aa20041.chunk.js.map