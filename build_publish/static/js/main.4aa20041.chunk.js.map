{"version":3,"sources":["shared/constants/actions.js","Store/Loading/actions/index.js","Store/Error/actions/index.js","shared/utilities/actionUtils.js","shared/utilities/Axios.js","Store/Auth/actions/index.js","shared/constants/urls.js","shared/utilities/authUtils.js","Store/Search/actions/index.js","Store/Search/reducers/index.js","Store/Error/reducers/index.js","Store/Loading/reducers/index.js","Store/Modal/actions/index.js","Store/Modal/reducers/index.js","Store/Auth/reducers/index.js","Store/Council/reducers/index.js","Store/Council/constants/index.js","Store/Building/reducers/index.js","Store/Building/constants/index.js","Store/AdvancedSearch/reducers/index.js","Store/AdvancedSearch/constants/index.js","Store/reducers.js","Store/configureStore.js","Auth/UserContext/index.js","Layout/NavigationBar/index.js","Layout/Header/index.js","Layout/index.js","BuildingSearchModule/SearchBar/index.js","shared/styles/icons/MapMarkerIcon.js","shared/styles/icons/BuildingIcon.js","BuildingSearchModule/SearchResultRow/index.js","BuildingSearchModule/SearchResults/index.js","Store/Loading/selectors/index.js","Store/Error/selectors/index.js","BuildingSearchModule/index.js","Main/index.js","Store/Building/actions/index.js","shared/constants/filters.js","shared/constants/datasets.js","shared/utilities/routeUtils.js","LeafletMap/index.js","shared/components/RecordsFetchModule/index.js","shared/components/Loading/index.js","BuildingLookup/BuildingHistoryTable/index.js","BuildingLookup/index.js","Store/Council/actions/index.js","DistrictMap/Show/index.js","DistrictMap/index.js","shared/utilities/advancedSearchUtils.js","Store/AdvancedSearch/actions/index.js","AdvancedSearch/Sentence/index.js","shared/components/Select/index.js","AdvancedSearch/Filter/DateFilter/index.js","AdvancedSearch/Filter/index.js","shared/utilities/componentUtils.js","AdvancedSearch/Condition/index.js","AdvancedSearch/index.js","shared/components/Page404/index.js","Router/index.js","shared/components/BaseModal/index.js","Auth/LoginForm/index.js","Auth/LoginModal/index.js","Auth/index.js","ModalContainer/index.js","App.js","serviceWorker.js","index.js"],"names":["USER_STORAGE","handleRequest","type","handleCompletedRequest","handleClearErrors","ERROR_500_MESSAGE","handleCatchError","error","dispatch","errorMessage","errorStatus","response","status","data","results","detail","non_field_errors","refresh","err","findErrorKeyValue","message","errorActions","toast","concat","loadingActions","constructActionKey","constant","params","value","comparison","sinceDate","endDate","filter","el","map","replace","toUpperCase","join","Axios","axios","create","baseURL","process","timeout","headers","Content-type","constructAxiosGet","url","access_token","handleAction","handleActionDispatch","get","Object","objectSpread","format","authorization","then","catch","handleSyncStorage","storage","refreshTokens","refresh_token","post","updateLocalStorage","access","JSON","parse","localStorage","getItem","logoutUser","loginUser","username","password","requestWithAuth","success","removeItem","push","info","TOKEN_EXPIRATIONS","arguments","length","undefined","user","token","expiration","moment","add","newData","propName","setItem","stringify","request","handleReadSearchResponse","bin","housenumber","street","borough","initialState","searchTimeout","searchReducer","state","freeze","action","errorReducer","matches","exec","_matches","slicedToArray","requestName","requestState","defineProperty","loadingReducer","closeModal","modalProps","show","modalReducer","authReducer","districts","district","districtHousing","districtPropertySummaries","councilReducer","key","currentBuilding","buildingReducer","conditions","filters","advancedSearchReducer","newCondition","newConditions","slice","conditionIndex","conditionGroup","toConsumableArray","pop","condition","some","conditionGroupFilter","filterIndex","newFilter","splice","reducers","history","combineReducers","router","connectRouter","loading","modal","auth","search","council","building","advancedSearch","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createBrowserHistory","middleware","routerMiddleware","thunk","_ref","getState","next","subtract","UserContext","React","createContext","connect","props","react_default","a","createElement","className","Navbar","bg","variant","expand","Brand","as","Link","to","Toggle","aria-controls","Collapse","id","Nav","Header","Row","Col","sm","md","defaultActiveKey","Item","Layout","Auth_UserContext","Consumer","Layout_NavigationBar","Layout_Header","Container","children","SearchBar","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onFormSubmit","bind","assertThisInitialized","dispatchQuery","onInputChange","nextProps","selectedResult","setSearchValue","boroughName","e","preventDefault","dispatchSelectedBuildingResult","fts","queryBuildingAddress","event","clearSelectedSearch","target","clearTimeout","setSearchTimeout","setTimeout","Form","autoComplete","onSubmit","Label","Control","size","onChange","placeholder","tabIndex","searchValue","Component","MapMarkerIcon","viewBox","d","BuildingIcon","width","height","SearchResultRow","result","alternateaddress","icons_BuildingIcon","react_router_bootstrap_lib","buildingnumber","buildingstreet","icons_MapMarkerIcon","propertyaddress","bbl","SearchResults","Table","bordered","hover","index","BuildingSearchModule_SearchResultRow","selectBuildingResult","createLoadingSelector","actions","createErrorSelector","BuildingSearchModule","setState","SearchBar_SearchBar","BuildingSearchModule_SearchResults","loadingSelector","errorSelector","Main","src_Layout","src_BuildingSearchModule","path","location","pathname","handleGetBuilding","handleGetBuildingResource","getBuildingResource","dataset","CONSTANT","AMOUNTDATE","fields","options","label","HPDVIOLATIONS","name","queryName","dateField","amountField","f","defaultFilterValues","startDate","DOBVIOLATIONS","ECBVIOLATIONS","HPDCOMPLAINTS","DOBCOMPLAINTS","EVICTIONS","resourceRouteChanged","oldProps","newProps","center","LeafletMap","Map","doubleClickZoom","minZoom","maxZoom","ref","mapRef","zoomControl","zoom","TileLayer","attribution","RecordsFetchModule","getRecords","records","recordsFetch","urlParams","render","title","resolvePath","reducerPath","Loading","BuildingHistoryTable","Jumbotron","style","maxHeight","whiteSpace","overflow","textOverflow","components_Loading","BuildingLookup","fetchBuildingById","LeafletMap_LeafletMap","components_RecordsFetchModule","BuildingLookup_BuildingHistoryTable","match","createMatchSelector","matchSelector","handleGetCouncils","handleGetCouncil","handleGetCouncilPropertySummary","getCouncilPropertySummary","constructSimplePropertyParams","DistictMapShow","DistrictMap","fetchCouncils","fetchCouncilById","handleDistrictChange","syncToStore","coundist","Group","react_select_esm","Show","convertConditionMappingToQ","filterObject","groupLabel","object","constructDateFilter","constructAmountFilter","convertFilterToParams","convertFilterToSentence","constructComparisonString","constructAmountSentence","constructDateSentence","convertConditionMappingToSentence","q","convertConditionGroupToSentence","constructConditionFill","handleGetAdvancedSearch","AdvancedSearchSentence","customStyle","control","base","min-height","container","valueContainer","CustomSelect","assign","styles","DateField","startingConfig","config","chooseDateConfig","filterValues","renderDateConfig","_this2","Select","field","find","option","Filter","creatingFilter","filterModel","constructFilter","removeFilter","submitFilter","updateFilter","stopPropagation","formElements","Array","from","currentTarget","elements","forEach","addFilter","datasetOptions","entries","ds","column","DateFilter","convertFieldsToComponents","Button","onClick","Condition","addCondition","removeCondition","containsCondition","AdvancedSearch_Filter","renderFilterOrCondition","AdvancedSearch","submitSearch","Sentence","AdvancedSearch_Condition","Page404","Card","margin","Img","src","Body","Title","Text","ButtonGroup","href","store","Router","esm","Switch","Route","exact","src_Main","src_BuildingLookup","src_DistrictMap","src_AdvancedSearch","showLoginModal","components_Page404","BaseModal","Modal","aria-labelledby","labelId","centered","dialogClassName","onHide","closeButton","modalFooter","defaultProps","preloadedState","schema","yup","required","LoginForm","validated","handleSubmit","form","checkValidity","userData","loginUsername","loginPassword","formik_esm","validationSchema","handleChange","handleBlur","touched","errors","controlId","onBlur","isValid","isInvalid","disabled","LoginModal","components_BaseModal","Auth_LoginForm","Auth","openLoginModal","hideModal","handleLoginPath","handleLogoutPath","loginError","loginLoading","Provider","ModalContainer","getAuthState","createStore","createRootReducer","applyMiddleware","apply","App","_React$Component","inherits","createClass","react_redux_es","src_Auth","src_Router","lib","src_ModalContainer","Boolean","hostname","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4aa20041.chunk.js","sourcesContent":["export const GET_BUILDING_SEARCH = 'GET_BUILDING_SEARCH'\nexport const GET_TOKEN = 'GET_TOKEN'\nexport const GET_TOKEN_REFRESH = 'GET_TOKEN_REFRESH'\nexport const GET_USER_PROFILE = 'GET_USER_PROFILE'\n\nexport const USER_STORAGE = 'anhd-dap-portal--user'\n","export const handleRequest = type => ({\n  type: type + '_PENDING',\n})\n\nexport const handleCompletedRequest = type => ({\n  type: type + '_COMPLETE',\n})\n","export const handleClearErrors = type => ({\n  type: type + '_CLEAR_ERRORS',\n})\n\nexport const handleFailure = (type, status, message) => {\n  return {\n    type: type + '_FAILURE',\n    status: status,\n    message: message,\n  }\n}\n","import * as loadingActions from 'Store/Loading/actions'\nimport * as errorActions from 'Store/Error/actions'\nimport { toast } from 'react-toastify'\n\nconst ERROR_400_MESSAGE = 'Incorrect username or password.'\nconst ERROR_401_MESSAGE = 'Please login for access.'\nconst ERROR_404_MESSAGE = 'Not found.'\nconst ERROR_500_MESSAGE = 'Oops, something went wrong.'\n\nexport const handleActionDispatch = (dispatch, constant) => {\n  dispatch(loadingActions.handleRequest(constant))\n  dispatch(errorActions.handleClearErrors(constant))\n}\n\nconst findErrorKeyValue = (status, data) => {\n  if (!data) return ERROR_500_MESSAGE\n  try {\n    if (status === 400) {\n      return ERROR_400_MESSAGE\n    } else if (status === 401) {\n      return ERROR_401_MESSAGE\n    } else if (status === 404) {\n      return ERROR_404_MESSAGE\n    } else if (status === 500) {\n      return ERROR_500_MESSAGE\n    }\n    return data.detail || data.non_field_errors[0] || data.refresh[0] || ERROR_500_MESSAGE\n  } catch (err) {\n    return ERROR_500_MESSAGE\n  }\n}\n\nexport const handleCatchError = (error, type, dispatch) => {\n  let errorMessage = ''\n  let errorStatus = ''\n  if (!error.response) {\n    errorMessage = ERROR_500_MESSAGE\n    errorStatus = 500\n  } else {\n    errorStatus = error.response.status\n    if (error.response.status === 500) {\n      errorMessage = error.response.data.results\n    } else if (error.response.status > 200) {\n      errorMessage = findErrorKeyValue(error.response.status, error.response.data)\n    }\n  }\n  dispatch(errorActions.handleFailure(type, errorStatus, errorMessage))\n  toast.error(`Error: ${errorStatus} - ${errorMessage}`)\n\n  dispatch(loadingActions.handleCompletedRequest(type))\n}\n\nexport const constructActionKey = (constant, params) => {\n  if (!params) return constant\n  const { type, value, comparison, sinceDate, endDate } = params\n  return [constant, type, comparison, value, sinceDate, endDate]\n    .filter(el => el)\n    .map(el => el.replace(' ', '').toUpperCase())\n    .join('_')\n}\n\nexport const constructSimplePropertyParams = params => {\n  // Takes an objects like:\n  // { type: 'hpdviolations', comparison: 'gte', value: 10, startDate: '2017-01-01', endDate: '2018-01-01'}\n  // And converts it to url param object:\n  // { hpdviolations__gte: 10, hpdviolations__start: '2017-01-01', hpdviolations__end: '2018-01-01'}\n  return {\n    [`${params.type}__${params.comparison}`]: params.value,\n    [`${params.type}__start`]: params.startDate,\n    [`${params.type}__end`]: params.endDate,\n  }\n}\n","import axios from 'axios'\nimport { handleCatchError, handleActionDispatch } from 'shared/utilities/actionUtils'\nimport { handleCompletedRequest } from 'Store/Loading/actions'\n\nexport const Axios = axios.create({\n  baseURL: process.env.REACT_APP_API_URL,\n  timeout: 30000,\n  headers: { 'Content-type': 'application/json' },\n})\n\nexport const constructAxiosGet = (url, params, access_token, dispatch, constant, handleAction) => {\n  handleActionDispatch(dispatch, constant)\n\n  return Axios.get(url, {\n    params: { format: 'json', ...params },\n    headers: typeof access_token === 'string' ? { authorization: `Bearer ${access_token}` } : null,\n  })\n    .then(response => {\n      dispatch(handleCompletedRequest(constant))\n      dispatch(handleAction(response, constant))\n    })\n    .catch(error => {\n      handleCatchError(error, constant, dispatch)\n    })\n}\n","import { Axios } from 'shared/utilities/Axios'\nimport * as loadingActions from 'Store/Loading/actions'\nimport * as errorActions from 'Store/Error/actions'\nimport { TOKEN_URL, TOKEN_REFRESH_URL, CURRENT_USER_URL } from 'shared/constants/urls'\nimport { USER_STORAGE, GET_TOKEN, GET_TOKEN_REFRESH, GET_USER_PROFILE } from 'shared/constants/actions'\nimport { handleCatchError } from 'shared/utilities/actionUtils'\nimport { updateLocalStorage, requestWithAuth } from 'shared/utilities/authUtils'\nimport { toast } from 'react-toastify'\nimport { push } from 'connected-react-router'\n\nexport const HANDLE_SYNC_STORAGE = 'HANDLE_SYNC_STORAGE'\nexport const HANDLE_USER_LOGOUT = 'HANDLE_USER_LOGOUT'\n\nexport const handleSyncStorage = storage => {\n  return {\n    type: HANDLE_SYNC_STORAGE,\n    data: storage,\n  }\n}\n\nexport const handleUserLogout = () => {\n  return {\n    type: HANDLE_USER_LOGOUT,\n  }\n}\n\nexport const getUserProfile = () => (dispatch, access_token) => {\n  dispatch(loadingActions.handleRequest(GET_USER_PROFILE))\n  dispatch(errorActions.handleClearErrors(GET_USER_PROFILE))\n\n  try {\n    return Axios.get(CURRENT_USER_URL, {\n      headers: {\n        authorization: `Bearer ${access_token}`,\n      },\n    })\n      .then(response => {\n        dispatch(loadingActions.handleCompletedRequest(GET_USER_PROFILE))\n        updateLocalStorage(null, null, response.data, dispatch)\n        dispatch(handleSyncStorage(JSON.parse(localStorage.getItem(USER_STORAGE))))\n        toast.success(`Welcome, ${response.data.username}!`)\n      })\n      .catch(error => {\n        handleCatchError(error, GET_USER_PROFILE, dispatch)\n      })\n  } catch (err) {\n    const error = { response: { status: 500, data: { results: error.message } } }\n    handleCatchError(error, GET_USER_PROFILE, dispatch)\n  }\n}\n\nexport const refreshTokens = refresh_token => dispatch => {\n  dispatch(loadingActions.handleRequest(GET_TOKEN_REFRESH))\n  dispatch(errorActions.handleClearErrors(GET_TOKEN_REFRESH))\n  return Axios.post(TOKEN_REFRESH_URL, { refresh: refresh_token })\n    .then(response => {\n      updateLocalStorage(response.data.access, response.data.refresh, null, dispatch)\n      dispatch(loadingActions.handleCompletedRequest(GET_TOKEN_REFRESH))\n      dispatch(handleSyncStorage(JSON.parse(localStorage.getItem(USER_STORAGE))))\n      return JSON.parse(localStorage.getItem(USER_STORAGE))\n    })\n    .catch(error => {\n      handleCatchError(error, GET_TOKEN_REFRESH, dispatch)\n      dispatch(logoutUser())\n    })\n}\n\nexport const loginUser = data => dispatch => {\n  dispatch(loadingActions.handleRequest(GET_TOKEN))\n  dispatch(errorActions.handleClearErrors(GET_TOKEN))\n  return Axios.post(TOKEN_URL, { username: data.username, password: data.password })\n    .then(response => {\n      dispatch(loadingActions.handleCompletedRequest(GET_TOKEN))\n\n      updateLocalStorage(response.data.access, response.data.refresh, null, dispatch)\n      dispatch(handleSyncStorage(JSON.parse(localStorage.getItem(USER_STORAGE))))\n      dispatch(requestWithAuth(getUserProfile()))\n    })\n    .catch(error => {\n      handleCatchError(error, GET_TOKEN, dispatch)\n    })\n}\n\nexport const logoutUser = () => dispatch => {\n  localStorage.removeItem(USER_STORAGE)\n  dispatch(handleUserLogout())\n  dispatch(push('/'))\n  toast.info(\"You've been logged out.\")\n}\n","// API\nexport const SEARCH_URL = '/search/buildings/'\nexport const TOKEN_URL = '/api/token/'\nexport const TOKEN_REFRESH_URL = '/api/token/refresh/'\nexport const CURRENT_USER_URL = '/users/current/'\nexport const COUNCILS_URL = '/councils/'\nexport const BUILDING_URL = '/buildings/'\nexport const PROPERTY_URL = '/properties/'\n","import moment from 'moment'\nimport { USER_STORAGE } from 'shared/constants/actions'\nimport { logoutUser, refreshTokens } from 'Store/Auth/actions'\n\nconst TOKEN_EXPIRATIONS = {\n  access: 5, // minutes\n  refresh: 10, // hours\n}\n\nexport const updateLocalStorage = (access = null, refresh = null, user = null, dispatch) => {\n  try {\n    if (access) {\n      access = {\n        token: access,\n        expiration: moment()\n          .add(TOKEN_EXPIRATIONS.access, 'minutes')\n          .format(),\n      }\n    }\n\n    if (refresh) {\n      refresh = {\n        token: refresh,\n        expiration: moment()\n          .add(TOKEN_EXPIRATIONS.refresh, 'hours')\n          .format(),\n      }\n    }\n\n    const newData = { access, refresh, user }\n    // Clear null values\n    for (var propName in newData) {\n      if (newData[propName] === null || newData[propName] === undefined) {\n        delete newData[propName]\n      }\n    }\n\n    let storage = JSON.parse(localStorage.getItem(USER_STORAGE))\n    storage = { ...storage, ...newData }\n    localStorage.setItem(USER_STORAGE, JSON.stringify(storage))\n  } catch (error) {\n    dispatch(logoutUser())\n  }\n}\n\nexport const requestMiddleware = () => {\n  return ({ dispatch, getState }) => next => action => {\n    const { request } = action\n    let auth = getState().auth\n    if (!request) {\n      return next(action)\n    } else if (!auth.refresh) {\n      return request(dispatch)\n    }\n\n    // Refresh token if token has been alive for over 4 min\n    if (moment() > moment(auth.access.expiration).subtract(1, 'minutes')) {\n      dispatch(refreshTokens(auth.refresh.token))\n        .then(() => {\n          auth = getState().auth\n          return request(dispatch, auth.access.token)\n        })\n        .catch(() => {\n          return dispatch(logoutUser())\n        })\n    } else {\n      return request(dispatch, auth.access.token)\n    }\n  }\n}\n\nexport const requestWithAuth = request => {\n  return {\n    type: 'AUTH_REQUEST',\n    request: (dispatch, access_token) => request(dispatch, access_token),\n  }\n}\n","import { constructAxiosGet } from 'shared/utilities/Axios'\nimport { SEARCH_URL } from 'shared/constants/urls'\nimport * as loadingActions from 'Store/Loading/actions'\nimport { GET_BUILDING_SEARCH } from 'shared/constants/actions'\nexport const HANDLE_READ_SEARCH_RESPONSE = 'HANDLE_READ_SEARCH_RESPONSE'\nexport const CLEAR_SEARCH = 'CLEAR_SEARCH'\nexport const SET_SEARCH_TIMEOUT = 'SET_SEARCH_TIMEOUT'\n\nexport const handleReadSearchResponse = (response, key = null) => {\n  let results = response.data\n  if (!results.length) {\n    results = [{ bin: undefined, housenumber: '', street: 'No results', borough: '' }]\n  }\n\n  return {\n    type: HANDLE_READ_SEARCH_RESPONSE,\n    data: results,\n  }\n}\nexport const clearSearch = () => ({\n  type: CLEAR_SEARCH,\n})\n\nexport const setSearchTimeout = event => ({\n  type: SET_SEARCH_TIMEOUT,\n  data: event,\n})\n\nexport const queryBuildingAddress = value => (dispatch, access_token) => {\n  return constructAxiosGet(\n    SEARCH_URL,\n    { fts: value },\n    access_token,\n    dispatch,\n    GET_BUILDING_SEARCH,\n    handleReadSearchResponse\n  )\n}\n","import * as searchActions from '../actions'\n\nexport const initialState = {\n  results: [],\n  searchTimeout: undefined,\n}\n\nexport const searchReducer = (state = Object.freeze(initialState), action = { data: [] }) => {\n  switch (action.type) {\n    case searchActions.SET_SEARCH_TIMEOUT: {\n      return { ...state, searchTimeout: action.data }\n    }\n    case searchActions.HANDLE_READ_SEARCH_RESPONSE: {\n      return {\n        ...state,\n        results: action.data || [],\n      }\n    }\n    case searchActions.CLEAR_SEARCH: {\n      return { ...state, results: [] }\n    }\n\n    default:\n      return state\n  }\n}\n","export const initialState = {}\n\nexport const errorReducer = (state = Object.freeze(initialState), action = { data: [] }) => {\n  const { type } = action\n  const matches = /(.*)_(CLEAR_ERRORS|FAILURE)/.exec(type)\n  if (!matches) return state\n  const [, requestName, requestState] = matches\n  return {\n    ...state,\n    [requestName]: requestState === 'FAILURE' ? { status: action.status, message: action.message } : null,\n  }\n}\n","export const initialState = {}\n\nexport const loadingReducer = (state = Object.freeze(initialState), action = { data: [] }) => {\n  const { type } = action\n  const matches = /(.*)_(PENDING|COMPLETE)/.exec(type)\n  // not a *_REQUEST / *_SUCCESS /  *_FAILURE actions, so we ignore them\n  if (!matches) return state\n\n  const [, requestName, requestState] = matches\n  return {\n    ...state,\n    // Store whether a request is happening at the moment or not\n    // e.g. will be true when receiving GET_TODOS_REQUEST\n    //      and false when receiving GET_TODOS_SUCCESS / GET_TODOS_FAILURE\n    [requestName]: requestState === 'PENDING',\n  }\n}\n","export const HANDLE_MODAL_ACTION = 'HANDLE_MODAL_ACTION'\n\nexport const openModal = (type, modalProps) => {\n  modalProps = { ...modalProps, show: true }\n  return {\n    type: HANDLE_MODAL_ACTION,\n    data: { type, modalProps },\n  }\n}\n\nexport const closeModal = (type, modalProps) => {\n  modalProps = { ...modalProps, show: false }\n  return {\n    type: HANDLE_MODAL_ACTION,\n    data: { type, modalProps },\n  }\n}\n","import * as actions from '../actions'\n\nexport const initialState = {\n  type: undefined,\n  modalProps: {},\n}\n\nexport const modalReducer = (state = Object.freeze(initialState), action = { data: [] }) => {\n  switch (action.type) {\n    case actions.HANDLE_MODAL_ACTION: {\n      return {\n        ...state,\n        type: (action.data || {}).type,\n        modalProps: (action.data || {}).modalProps,\n      }\n    }\n    default:\n      return state\n  }\n}\n","import * as actions from '../actions'\n\nexport const initialState = {\n  user: undefined,\n  access: undefined,\n  refresh: undefined,\n}\n\nexport const authReducer = (state = Object.freeze(initialState), action = { data: [] }) => {\n  switch (action.type) {\n    case actions.HANDLE_SYNC_STORAGE: {\n      return {\n        ...state,\n        access: (action.data || {}).access,\n        refresh: (action.data || {}).refresh,\n        user: (action.data || {}).user,\n      }\n    }\n    case actions.HANDLE_USER_LOGOUT: {\n      return { ...initialState }\n    }\n    default:\n      return state\n  }\n}\n","import * as c from '../constants'\n\nexport const initialState = {\n  districts: undefined,\n  district: undefined,\n  districtHousing: undefined,\n  districtPropertySummaries: {},\n}\n\nexport const councilReducer = (state = Object.freeze(initialState), action = { data: [] }) => {\n  switch (action.type) {\n    case c.HANDLE_GET_COUNCILS: {\n      return {\n        ...state,\n        districts: action.data,\n      }\n    }\n    case c.HANDLE_GET_COUNCIL: {\n      return {\n        ...state,\n        district: action.data,\n      }\n    }\n    case c.HANDLE_GET_COUNCIL_HOUSING: {\n      return {\n        ...state,\n        districtHousing: action.data,\n      }\n    }\n    case c.HANDLE_GET_COUNCIL_PROPERTY_SUMMARY: {\n      return {\n        ...state,\n        districtPropertySummaries: {\n          ...state.districtPropertySummaries,\n          [action.key]: action.data,\n        },\n      }\n    }\n    default:\n      return state\n  }\n}\n","export const HANDLE_GET_COUNCILS = 'HANDLE_GET_COUNCILS'\nexport const GET_COUNCILS = 'GET_COUNCILS'\n\nexport const HANDLE_GET_COUNCIL = 'HANDLE_GET_COUNCIL'\nexport const GET_COUNCIL = 'GET_COUNCIL'\n\nexport const HANDLE_GET_COUNCIL_HOUSING = 'HANDLE_GET_COUNCIL_HOUSING'\nexport const GET_COUNCIL_HOUSING = 'GET_COUNCIL_HOUSING'\n\nexport const HANDLE_GET_COUNCIL_PROPERTY_SUMMARY = 'HANDLE_GET_COUNCIL_PROPERTY_SUMMARY'\nexport const GET_COUNCIL_PROPERTY_SUMMARY = 'GET_COUNCIL_PROPERTY_SUMMARY'\n\nexport const constructSummaryConstant = (constant, params) => {\n  const { type, value, comparison, startDate, endDate } = params\n\n  return [constant, type, comparison, value, startDate, endDate]\n    .filter(el => el)\n    .map(el => el.toUpperCase())\n    .join('_')\n}\n","import * as c from '../constants'\n\nexport const initialState = {\n  currentBuilding: undefined,\n}\n\nexport const buildingReducer = (state = Object.freeze(initialState), action = { data: [] }) => {\n  switch (action.type) {\n    case c.HANDLE_GET_BUILDING: {\n      return {\n        ...state,\n        currentBuilding: action.data,\n      }\n    }\n    case c.HANDLE_GET_BUILDING_RESOURCE: {\n      return {\n        ...state,\n        [action.key]: action.data,\n      }\n    }\n    default:\n      return state\n  }\n}\n","export const GET_BUILDING = 'GET_BUILDING'\nexport const HANDLE_GET_BUILDING = 'HANDLE_GET_BUILDING'\n\nexport const GET_BUILDING_RESOURCE = 'GET_BUILDING_RESOURCE'\nexport const HANDLE_GET_BUILDING_RESOURCE = 'HANDLE_GET_BUILDING_RESOURCE'\n\n// export const buildingResourceConstant = key => {\n//   return `${GET_BUILDING}_${key}`\n// }\n","import * as c from '../constants'\n\nexport const initialState = {\n  conditions: [\n    {\n      type: 'AND',\n      filters: [],\n    },\n  ],\n  results: undefined,\n}\n\nexport const advancedSearchReducer = (state = Object.freeze(initialState), action = { data: [] }) => {\n  switch (action.type) {\n    case c.ADD_NEW_CONDITION: {\n      const newCondition =\n        state.conditions[state.conditions.length - 1].type === 'AND'\n          ? { type: 'OR', filters: [] }\n          : { type: 'AND', filters: [] }\n\n      const newConditions = state.conditions.slice()\n      newConditions[action.conditionIndex].filters.push({ conditionGroup: action.conditionIndex + 1 })\n\n      return {\n        ...state,\n        conditions: [...newConditions, newCondition],\n      }\n    }\n    case c.REMOVE_LAST_CONDITION: {\n      const newConditions = state.conditions.slice()\n      newConditions.pop()\n\n      if (newConditions.length > 0) {\n        newConditions[newConditions.length - 1].filters.pop()\n      }\n\n      return {\n        ...state,\n        conditions: !newConditions.length ? [initialState.conditions[0]] : newConditions,\n      }\n    }\n    case c.ADD_FILTER: {\n      const newConditions = state.conditions.slice()\n      let condition = newConditions[action.conditionIndex]\n      if (condition.filters.some(el => el.conditionGroup)) {\n        const conditionGroupFilter = condition.filters.pop()\n        condition.filters.push(action.filter)\n        condition.filters.push(conditionGroupFilter)\n      } else {\n        condition.filters.push(action.filter)\n      }\n      return {\n        ...state,\n        conditions: [\n          ...newConditions.slice(0, action.conditionIndex),\n          condition,\n          ...newConditions.slice(action.conditionIndex + 1),\n        ],\n      }\n    }\n\n    case c.UPDATE_FILTER: {\n      const newConditions = state.conditions.slice()\n      let condition = newConditions[action.conditionIndex]\n      condition.filters[action.filterIndex] = action.newFilter\n      return {\n        ...state,\n        conditions: [\n          ...newConditions.slice(0, action.conditionIndex),\n          condition,\n          ...newConditions.slice(action.conditionIndex + 1),\n        ],\n      }\n    }\n    case c.REMOVE_FILTER: {\n      const newConditions = state.conditions.slice()\n      let condition = newConditions[action.conditionIndex]\n      condition.filters.splice(action.filterIndex, 1)\n      return {\n        ...state,\n        conditions: [\n          ...newConditions.slice(0, action.conditionIndex),\n          condition,\n          ...newConditions.slice(action.conditionIndex + 1),\n        ],\n      }\n    }\n    case c.HANDLE_GET_ADVANCED_SEARCH: {\n      return {\n        ...state,\n        results: action.data,\n      }\n    }\n\n    default:\n      return state\n  }\n}\n","export const ADD_NEW_CONDITION = 'ADD_NEW_CONDITION'\nexport const REMOVE_LAST_CONDITION = 'REMOVE_LAST_CONDITION'\nexport const ADD_FILTER = 'ADD_FILTER'\nexport const UPDATE_FILTER = 'UPDATE_FILTER'\nexport const REMOVE_FILTER = 'REMOVE_FILTER'\nexport const GET_ADVANCED_SEARCH = 'GET_ADVANCED_SEARCH'\nexport const HANDLE_GET_ADVANCED_SEARCH = 'HANDLE_GET_ADVANCED_SEARCH'\n","import { combineReducers } from 'redux'\nimport { connectRouter } from 'connected-react-router'\n\nimport { searchReducer } from 'Store/Search/reducers'\nimport { errorReducer } from 'Store/Error/reducers'\nimport { loadingReducer } from 'Store/Loading/reducers'\nimport { modalReducer } from 'Store/Modal/reducers'\nimport { authReducer } from 'Store/Auth/reducers'\nimport { councilReducer } from 'Store/Council/reducers'\nimport { buildingReducer } from 'Store/Building/reducers'\nimport { advancedSearchReducer } from 'Store/AdvancedSearch/reducers'\n\nexport default history =>\n  combineReducers({\n    router: connectRouter(history),\n    error: errorReducer,\n    loading: loadingReducer,\n    modal: modalReducer,\n    auth: authReducer,\n    search: searchReducer,\n    council: councilReducer,\n    building: buildingReducer,\n    advancedSearch: advancedSearchReducer,\n  })\n","import thunk from 'redux-thunk'\nimport { createBrowserHistory } from 'history'\nimport { applyMiddleware, compose, createStore } from 'redux'\nimport { routerMiddleware } from 'connected-react-router'\nimport { requestMiddleware } from 'shared/utilities/authUtils'\n\nimport createRootReducer from './reducers'\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n\nexport const history = createBrowserHistory()\nconst middleware = [routerMiddleware(history), thunk, requestMiddleware()]\n\nexport default function configureStore(preloadedState) {\n  const store = createStore(\n    createRootReducer(history), // root reducer with router state\n    preloadedState,\n    composeEnhancers(applyMiddleware(...middleware))\n  )\n\n  return store\n}\n","import React from 'react'\n\nconst UserContext = React.createContext(undefined)\n\nexport default UserContext\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Navbar, Nav } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\n\nconst NavigationBar = props => {\n  return (\n    <div className=\"header\">\n      <Navbar bg=\"dark\" variant=\"dark\" expand=\"lg\">\n        <Navbar.Brand as=\"li\">\n          <Link className=\"text-light\" to=\"/\">\n            Home\n          </Link>\n        </Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"mr-auto\">\n            {props.user && (\n              <Nav.Link as=\"li\">\n                <Link className=\"text-light\" to=\"/profile\">\n                  {props.user.username}\n                </Link>\n              </Nav.Link>\n            )}\n            {props.user ? (\n              <Nav.Link as=\"li\">\n                <Link className=\"text-light\" to=\"/logout\">\n                  Logout\n                </Link>\n              </Nav.Link>\n            ) : (\n              <Nav.Link as=\"li\">\n                <Link className=\"text-light\" to=\"/login\">\n                  Login\n                </Link>\n              </Nav.Link>\n            )}\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n    </div>\n  )\n}\n\nNavigationBar.propTypes = {\n  auth: PropTypes.object,\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n  }\n}\n\nexport default connect(mapStateToProps)(NavigationBar)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Row, Nav, Col } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\n\nconst Header = props => {\n  return (\n    <div className=\"header\">\n      <Row>\n        <Col sm={12} md={6}>\n          <Nav variant=\"tabs\" defaultActiveKey=\"/buildings\">\n            <Nav.Item>\n              <Nav.Link as=\"li\">\n                <Link to=\"/buildings\">Building Lookup</Link>\n              </Nav.Link>\n            </Nav.Item>\n            <Nav.Item>\n              <Nav.Link as=\"li\">\n                <Link to=\"/districts\">District Alerts</Link>\n              </Nav.Link>\n            </Nav.Item>\n            <Nav.Item>\n              <Nav.Link as=\"li\">\n                <Link to=\"/search\">Advanced Search</Link>\n              </Nav.Link>\n            </Nav.Item>\n          </Nav>\n        </Col>\n      </Row>\n    </div>\n  )\n}\n\nHeader.propTypes = {}\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport UserContext from 'Auth/UserContext'\nimport NavigationBar from 'Layout/NavigationBar'\nimport Header from 'Layout/Header'\nimport { Container } from 'react-bootstrap'\n\nconst Layout = props => {\n  return (\n    <div className=\"layout\">\n      <UserContext.Consumer>\n        {user => (\n          <div>\n            <NavigationBar user={user} />\n            <Header user={user} />\n          </div>\n        )}\n      </UserContext.Consumer>\n      <Container>{props.children}</Container>\n    </div>\n  )\n}\n\nLayout.propTypes = {}\n\nexport default Layout\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { setSearchTimeout, queryBuildingAddress } from 'Store/Search/actions'\nimport { requestWithAuth } from 'shared/utilities/authUtils'\nimport { Form } from 'react-bootstrap'\nimport './style.scss'\n\nexport default class SearchBar extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.onFormSubmit = this.onFormSubmit.bind(this)\n    this.dispatchQuery = this.dispatchQuery.bind(this)\n    this.onInputChange = this.onInputChange.bind(this)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.selectedResult) {\n      this.props.setSearchValue(\n        `${nextProps.selectedResult.housenumber} ${nextProps.selectedResult.street}, ${\n          nextProps.selectedResult.boroughName\n        }`\n      )\n    }\n  }\n\n  onFormSubmit(e) {\n    e.preventDefault()\n    this.props.dispatchSelectedBuildingResult()\n  }\n\n  dispatchQuery(value) {\n    this.props.dispatch(requestWithAuth(queryBuildingAddress(value)))\n  }\n\n  onInputChange(event) {\n    this.props.clearSelectedSearch()\n\n    this.props.setSearchValue(event.target.value)\n    clearTimeout(this.props.searchTimeout)\n    if (event.target.value) {\n      this.props.dispatch(setSearchTimeout(setTimeout(this.dispatchQuery, 250, event.target.value)))\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"search-bar\">\n        <Form autoComplete=\"off\" className=\"search-form\" onSubmit={this.onFormSubmit}>\n          <Form.Label>Search an address</Form.Label>\n          <Form.Control\n            size=\"lg\"\n            onChange={this.onInputChange}\n            placeholder=\"Type an address to search\"\n            tabIndex={0}\n            type=\"text\"\n            value={this.props.searchValue}\n          />\n        </Form>\n      </div>\n    )\n  }\n}\n\nSearchBar.propTypes = {\n  clearSelectedSearch: PropTypes.func,\n  dispatch: PropTypes.func,\n  searchTimeout: PropTypes.number,\n  selectBuildingResult: PropTypes.func,\n  selectedResult: PropTypes.object,\n  searchValue: PropTypes.string,\n  setSearchValue: PropTypes.func,\n}\n","import React from 'react'\n\nconst MapMarkerIcon = () => {\n  return (\n    <svg className=\"svg-icon\" viewBox=\"0 0 20 20\">\n      <path\n        className=\"svg-icon-primary-color\"\n        d=\"M10.001,6.54c-0.793,0-1.438,0.645-1.438,1.438c0,0.792,0.645,1.435,1.438,1.435c0.791,0,1.435-0.644,1.435-1.435C11.437,7.184,10.792,6.54,10.001,6.54z M10.001,8.454c-0.264,0-0.479-0.213-0.479-0.476c0-0.265,0.215-0.479,0.479-0.479c0.263,0,0.477,0.214,0.477,0.479C10.478,8.241,10.265,8.454,10.001,8.454z\"\n      />\n      <path\n        className=\"svg-icon-primary-color\"\n        d=\"M10,3.021c-2.815,0-5.106,2.291-5.106,5.106c0,0.781,0.188,1.549,0.562,2.282c0.011,0.062,0.036,0.12,0.07,0.174l0.125,0.188c0.074,0.123,0.151,0.242,0.225,0.341l3.727,5.65c0.088,0.135,0.238,0.215,0.399,0.215c0.161,0,0.311-0.08,0.4-0.215l3.752-5.68c0.057-0.08,0.107-0.159,0.153-0.232l0.132-0.199c0.033-0.05,0.054-0.104,0.064-0.159c0.401-0.757,0.605-1.551,0.605-2.366C15.107,5.312,12.815,3.021,10,3.021z M13.596,10.152c-0.017,0.03-0.029,0.062-0.039,0.095l-0.056,0.084c-0.043,0.066-0.085,0.133-0.139,0.211L10,15.629l-3.339-5.061c-0.068-0.095-0.132-0.193-0.203-0.309l-0.051-0.078c-0.009-0.031-0.021-0.061-0.038-0.089C6.026,9.458,5.852,8.796,5.852,8.127c0-2.287,1.861-4.148,4.147-4.148c2.288,0,4.149,1.861,4.149,4.148C14.148,8.823,13.963,9.503,13.596,10.152z\"\n      />\n    </svg>\n  )\n}\n\nexport default MapMarkerIcon\n","import React from 'react'\n\nconst BuildingIcon = () => {\n  return (\n    <svg className=\"svg-icon\" viewBox=\"0 0 20 20\">\n      <path\n        className=\"svg-icon-primary-color\"\n        width=\"100%\"\n        height=\"100%\"\n        d=\"M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z\"\n      />\n    </svg>\n  )\n}\n\nexport default BuildingIcon\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport MapMarkerIcon from '../../shared/styles/icons/MapMarkerIcon'\nimport BuildingIcon from '../../shared/styles/icons/BuildingIcon'\n\nimport { LinkContainer } from 'react-router-bootstrap'\n\nimport './style.scss'\n\nconst SearchResultRow = props => {\n  if (props.result.bin && !props.result.alternateaddress) {\n    return (\n      <tr className=\"search-result-row\">\n        <td>\n          <BuildingIcon />\n        </td>\n        <LinkContainer to={`/buildings/${props.result.bin}`}>\n          <td>{`${props.result.buildingnumber} ${props.result.buildingstreet}, ${props.result.borough}`}</td>\n        </LinkContainer>\n      </tr>\n    )\n  } else if (props.result.bin && props.result.alternateaddress) {\n    return (\n      <tr className=\"search-result-row\">\n        <td>\n          <MapMarkerIcon />\n          <BuildingIcon />\n        </td>\n        <LinkContainer to={`/buildings/${props.result.bin}`}>\n          <td>\n            {`${props.result.propertyaddress}, ${props.result.borough}`}\n            <br />\n            {`Alt Address: ${props.result.buildingnumber} ${props.result.buildingstreet}, ${props.result.borough}`}\n          </td>\n        </LinkContainer>\n      </tr>\n    )\n  } else if (props.result.alternateaddress) {\n    return (\n      <tr className=\"search-result-row\">\n        <td>\n          <MapMarkerIcon />\n        </td>\n        <LinkContainer to={`/properties/${props.result.bbl}`}>\n          <td>{`Property address: ${props.result.propertyaddress} - ${props.result.borough}`}</td>\n        </LinkContainer>\n      </tr>\n    )\n  } else {\n    return (\n      <tr className=\"search-result-row\">\n        <td>No results.</td>\n      </tr>\n    )\n  }\n}\n\nSearchResultRow.propTypes = {\n  selectBuildingResult: PropTypes.func,\n  dispatch: PropTypes.func,\n  result: PropTypes.object,\n}\n\nexport default SearchResultRow\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport SearchResultRow from 'BuildingSearchModule/SearchResultRow'\n\nimport './style.scss'\nimport { Table } from 'react-bootstrap'\nconst SearchResults = props => {\n  return (\n    <div>\n      {props.loading && <div className=\"text-info\">loading</div>}\n      {props.error && <div className=\"text-danger\">{props.error.message}</div>}\n      <Table className=\"search-results\" size=\"sm\" bordered hover>\n        <tbody>\n          {!!props.results.length &&\n            props.results.map((result, index) => (\n              <SearchResultRow\n                selectBuildingResult={props.selectBuildingResult}\n                key={`result-${index}`}\n                result={result}\n              />\n            ))}\n        </tbody>\n      </Table>\n    </div>\n  )\n}\n\nSearchResults.propTypes = {\n  loading: PropTypes.bool,\n  error: PropTypes.object,\n  selectBuildingResult: PropTypes.func,\n  results: PropTypes.array,\n}\n\nexport default SearchResults\n","export const createLoadingSelector = actions => state => {\n  // returns false only when all actions are not loading\n  return actions.some(action => state.loading[action])\n}\n","export const createErrorSelector = actions => state => {\n  // returns the first error messages for actions\n  // * We assume when any request fails on a page that\n  //   requires multiple API calls, we shows the first error\n  return actions.map(action => state.error[action]).filter(action => action)[0]\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport SearchBar from './SearchBar'\nimport SearchResults from './SearchResults'\nimport { clearSearch } from '../Store/Search/actions'\nimport { createLoadingSelector } from 'Store/Loading/selectors'\nimport { createErrorSelector } from 'Store/Error/selectors'\n\nimport { GET_BUILDING_SEARCH } from 'shared/constants/actions'\nimport { handleClearErrors } from 'Store/Error/actions'\n\nimport './style.scss'\n\nclass BuildingSearchModule extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.selectBuildingResult = this.selectBuildingResult.bind(this)\n    this.dispatchSelectedBuildingResult = this.dispatchSelectedBuildingResult.bind(this)\n    this.clearSelectedSearch = this.clearSelectedSearch.bind(this)\n    this.setSearchValue = this.setSearchValue.bind(this)\n\n    this.state = {\n      selectedResult: null,\n      searchValue: '',\n    }\n  }\n\n  setSearchValue(value) {\n    if (!value) {\n      this.props.dispatch(handleClearErrors(GET_BUILDING_SEARCH))\n      this.props.dispatch(clearSearch())\n    }\n    this.setState({\n      searchValue: value,\n    })\n  }\n\n  clearSelectedSearch() {\n    this.setState({ selectedResult: null })\n    this.props.dispatch(clearSearch())\n  }\n\n  selectBuildingResult(result) {\n    this.setState({ selectedResult: result })\n    this.dispatchSelectedBuildingResult(result)\n  }\n\n  dispatchSelectedBuildingResult(result = null) {\n    const selectedResult = result || this.state.selectedResult || this.props.search.results[0]\n    if (!selectedResult) return\n    this.setState({ selectedResult: selectedResult })\n    this.props.dispatch(clearSearch())\n  }\n\n  render() {\n    return (\n      <div className=\"search-module\">\n        <SearchBar\n          clearSelectedSearch={this.clearSelectedSearch}\n          dispatch={this.props.dispatch}\n          dispatchSelectedBuildingResult={this.dispatchSelectedBuildingResult}\n          searchTimeout={this.props.search.searchTimeout}\n          selectBuildingResult={this.selectBuildingResult}\n          selectedResult={this.state.selectedResult}\n          searchValue={this.state.searchValue}\n          setSearchValue={this.setSearchValue}\n        />\n        <SearchResults\n          loading={this.props.loading}\n          error={this.props.error}\n          selectBuildingResult={this.selectBuildingResult}\n          results={this.props.search.results}\n        />\n      </div>\n    )\n  }\n}\n\nBuildingSearchModule.propTypes = {\n  setViewCoordinates: PropTypes.func,\n  search: PropTypes.object,\n  error: PropTypes.object,\n  loading: PropTypes.bool,\n  dispatch: PropTypes.func,\n}\n\nconst loadingSelector = createLoadingSelector([GET_BUILDING_SEARCH])\nconst errorSelector = createErrorSelector([GET_BUILDING_SEARCH])\nconst mapStateToProps = state => {\n  return {\n    search: state.search,\n    loading: loadingSelector(state),\n    error: errorSelector(state),\n  }\n}\n\nexport default connect(mapStateToProps)(BuildingSearchModule)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Layout from 'Layout'\nimport BuildingSearchModule from '../BuildingSearchModule'\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    return (\n      <Layout>\n        <BuildingSearchModule />\n      </Layout>\n    )\n  }\n}\n\nMain.propTypes = {\n  auth: PropTypes.object,\n  dispatch: PropTypes.func,\n  showLoginModal: PropTypes.bool,\n  path: PropTypes.string,\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    path: state.router.location.pathname,\n  }\n}\n\nexport default connect(mapStateToProps)(Main)\n","import { constructAxiosGet } from 'shared/utilities/Axios'\nimport * as u from 'shared/constants/urls'\nimport * as c from '../constants'\nimport { constructActionKey } from 'shared/utilities/actionUtils'\n\nexport const handleGetBuilding = (response, key = null) => ({\n  type: c.HANDLE_GET_BUILDING,\n  data: response.data,\n})\n\nexport const handleGetBuildingResource = (response, key = null) => ({\n  type: c.HANDLE_GET_BUILDING_RESOURCE,\n  key: key,\n  data: response.data,\n})\n\nexport const getBuilding = id => (dispatch, access_token) => {\n  return constructAxiosGet(`${u.BUILDING_URL}${id}`, null, access_token, dispatch, c.GET_BUILDING, handleGetBuilding)\n}\n\nexport const getBuildingResource = (dataset, id, params = null) => (dispatch, access_token) => {\n  const CONSTANT = constructActionKey(dataset.constant, params)\n  return constructAxiosGet(\n    `${u.BUILDING_URL}${id}${dataset.url}`,\n    null,\n    access_token,\n    dispatch,\n    CONSTANT,\n    handleGetBuildingResource\n  )\n}\n","export const AMOUNTDATE = {\n  fields: [\n    {\n      type: 'INTEGER',\n      options: [\n        { value: 'gte', label: 'At Least' },\n        { value: 'exact', label: 'Exactly' },\n        { value: 'lte', label: 'At Most' },\n      ],\n    },\n    {\n      type: 'DATE',\n      options: [\n        { value: 'range', label: 'From/To' },\n        { value: 'startDate', label: 'Since' },\n        { value: 'endDate', label: 'Before' },\n      ],\n    },\n  ],\n}\n","import * as f from 'shared/constants/filters'\n\nexport const HPDVIOLATIONS = {\n  name: 'HPD Violations',\n  queryName: 'hpdviolations',\n  url: '/hpdviolations/',\n  constant: 'HPD_VIOLATIONS',\n  dateField: () => 'approveddate',\n  amountField: () => 'count',\n  filter: f.AMOUNTDATE,\n  defaultFilterValues: {\n    comparison: 'gte',\n    value: '10',\n    startDate: '2018-01-01',\n  },\n}\n\nexport const DOBVIOLATIONS = {\n  name: 'DOB Violations',\n  queryName: 'dobviolations',\n  url: '/dobviolations/',\n  constant: 'DOB_VIOLATIONS',\n  dateField: () => 'issuedate',\n  amountField: () => 'count',\n  filter: f.AMOUNTDATE,\n  defaultFilterValues: {\n    comparison: 'gte',\n    value: '10',\n    startDate: '2018-01-01',\n  },\n}\n\nexport const ECBVIOLATIONS = {\n  name: 'ECB Violations',\n  queryName: 'ecbviolations',\n  url: '/ecbviolations/',\n  constant: 'ECB_VIOLATIONS',\n  dateField: () => 'issuedate',\n  amountField: () => 'count',\n  filter: f.AMOUNTDATE,\n  defaultFilterValues: {\n    comparison: 'gte',\n    value: '10',\n    startDate: '2017-01-01',\n  },\n}\n\nexport const HPDCOMPLAINTS = {\n  name: 'HPD Complaints',\n  queryName: 'hpdcomplaints',\n  url: '/hpdcomplaints/',\n  constant: 'HPD_COMPLAINTS',\n  dateField: () => 'receiveddate',\n  amountField: () => 'count',\n  filter: f.AMOUNTDATE,\n  defaultFilterValues: {\n    comparison: 'gte',\n    value: '10',\n    startDate: '2017-01-01',\n  },\n}\n\nexport const DOBCOMPLAINTS = {\n  name: 'DOB Complaints',\n  queryName: 'dobcomplaints',\n  url: '/dobcomplaints/',\n  constant: 'DOB_COMPLAINTS',\n  dateField: () => 'dateentered',\n  amountField: () => 'count',\n  filter: f.AMOUNTDATE,\n  defaultFilterValues: {\n    comparison: 'gte',\n    value: '10',\n    startDate: '2017-01-01',\n  },\n}\n\nexport const EVICTIONS = {\n  name: 'Evictions',\n  queryName: 'evictions',\n  url: '/evictions/',\n  constant: 'EVICTIONS',\n  dateField: () => 'executeddate',\n  amountField: () => 'count',\n  filter: f.AMOUNTDATE,\n  defaultFilterValues: {\n    comparison: 'gte',\n    value: '1',\n    startDate: '2017-01-01',\n  },\n}\n","export const resourceRouteChanged = (oldProps, newProps) => {\n  return oldProps.id !== newProps.id\n}\n","import React, { Component } from 'react'\nimport { Map, TileLayer } from 'react-leaflet'\n\nimport './style.scss'\n\nconst center = [40.71, -73.98]\n\nexport default class LeafletMap extends Component {\n  render() {\n    return (\n      <div id=\"map\">\n        <Map\n          doubleClickZoom={false}\n          id=\"leaflet-map\"\n          minZoom={13}\n          maxZoom={20}\n          ref={this.props.mapRef}\n          zoomControl={false}\n          className=\"map\"\n          center={center}\n          zoom={13}\n        >\n          <TileLayer\n            attribution=\"mapbox\"\n            url=\"https://api.mapbox.com/styles/v1/starcat/cjrik99zl9yae2so1gjksdn9x/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic3RhcmNhdCIsImEiOiJjamlpYmlsc28wbjlmM3FwbXdwaXozcWEzIn0.kLmWiUbmdqNLA1atmnTXXA\"\n          />\n        </Map>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport resolvePath from 'object-resolve-path'\nimport { createLoadingSelector } from 'Store/Loading/selectors'\nimport { createErrorSelector } from 'Store/Error/selectors'\nimport { requestWithAuth } from 'shared/utilities/authUtils'\nimport { resourceRouteChanged } from 'shared/utilities/routeUtils'\nimport { constructActionKey } from 'shared/utilities/actionUtils'\n\nclass RecordsFetchModule extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.getRecords = this.getRecords.bind(this)\n\n    this.getRecords(props)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.getRecords(nextProps)\n  }\n\n  getRecords(props) {\n    if (!(props.loading || props.error || props.records) || resourceRouteChanged(this.props, props)) {\n      props.dispatch(requestWithAuth(props.recordsFetch(props.dataset, props.id, props.urlParams)))\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"records-fetch-module\">\n        {this.props.render(this.props.title, this.props.records, this.props.loading, this.props.error)}\n      </div>\n    )\n  }\n}\n\nRecordsFetchModule.propTypes = {\n  dataset: PropTypes.object,\n  error: PropTypes.object,\n  loading: PropTypes.bool,\n  id: PropTypes.string,\n  records: PropTypes.array,\n  recordsFetch: PropTypes.func,\n  reducerPath: PropTypes.string,\n  title: PropTypes.string,\n  urlParams: PropTypes.object,\n}\n\nconst mapStateToProps = (state, props) => {\n  const loadingSelector = createLoadingSelector([constructActionKey(props.dataset.constant, props.urlParams)])\n  const errorSelector = createErrorSelector([constructActionKey(props.dataset.constant, props.urlParams)])\n\n  let records = undefined\n  try {\n    records = resolvePath(state, `${props.reducerPath}`)\n  } catch (err) {\n    return\n  }\n\n  return {\n    loading: loadingSelector(state),\n    error: errorSelector(state),\n    records: records ? records : undefined,\n  }\n}\n\nexport default connect(mapStateToProps)(RecordsFetchModule)\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport './style.scss'\n\nconst Loading = props => {\n  return <div className=\"loading\">Loading</div>\n}\n\nLoading.propTypes = {}\n\nexport default Loading\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Loading from 'shared/components/Loading'\n\nimport { Jumbotron } from 'react-bootstrap'\n\nconst BuildingHistoryTable = props => {\n  const renderTable = () => {\n    return (\n      <div>\n        <h5>Total: {(props.records || {}).length}</h5>\n        {JSON.stringify(props.records, null, 2)}\n      </div>\n    )\n  }\n  return (\n    <div className=\"building-history-table\">\n      <Jumbotron style={{ maxHeight: '500px', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>\n        <h4>{props.title}</h4>\n        {props.loading && <Loading />}\n        {props.error && <div>{props.error.message}</div>}\n        {!(props.loading || props.error) && renderTable()}\n      </Jumbotron>\n    </div>\n  )\n}\n\nBuildingHistoryTable.propTypes = {\n  error: PropTypes.object,\n  loading: PropTypes.bool,\n  title: PropTypes.string,\n  records: PropTypes.array,\n}\n\nexport default BuildingHistoryTable\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { createMatchSelector } from 'connected-react-router'\nimport * as a from 'Store/Building/actions'\nimport * as c from 'Store/Building/constants'\nimport * as d from 'shared/constants/datasets'\n\nimport { requestWithAuth } from 'shared/utilities/authUtils'\nimport { createLoadingSelector } from 'Store/Loading/selectors'\nimport { createErrorSelector } from 'Store/Error/selectors'\nimport { resourceRouteChanged } from 'shared/utilities/routeUtils'\nimport { getBuildingResource } from 'Store/Building/actions'\nimport Layout from 'Layout'\nimport LeafletMap from 'LeafletMap'\nimport BuildingSearchModule from '../BuildingSearchModule'\nimport { Row, Col, Jumbotron } from 'react-bootstrap'\nimport RecordsFetchModule from 'shared/components/RecordsFetchModule'\nimport BuildingHistoryTable from 'BuildingLookup/BuildingHistoryTable'\n\nclass BuildingLookup extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.fetchBuildingById = this.fetchBuildingById.bind(this)\n\n    if (props.id && !props.loading) {\n      this.fetchBuildingById(props)\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.id && !nextProps.loading) {\n      this.fetchBuildingById(nextProps)\n    }\n  }\n\n  fetchBuildingById(props) {\n    if (!(props.building || {}).currentBuilding || resourceRouteChanged(this.props, props)) {\n      props.dispatch(requestWithAuth(a.getBuilding(props.id)))\n    }\n  }\n\n  render() {\n    return (\n      <Layout>\n        <h1>Building Lookup</h1>\n\n        <Row>\n          <Col sm={12} md={5}>\n            <BuildingSearchModule />\n            <LeafletMap />\n          </Col>\n          <Col sm={12} md={7}>\n            <h2>Building Info</h2>\n            <Jumbotron style={{ maxHeight: '500px' }}>\n              {this.props.loading ? <div>Loading</div> : JSON.stringify(this.props.building.currentBuilding, null, 2)}\n            </Jumbotron>\n            <h2>Building History</h2>\n            <RecordsFetchModule\n              id={this.props.id}\n              dataset={d.HPDVIOLATIONS}\n              recordsFetch={getBuildingResource}\n              reducerPath={`building.${d.HPDVIOLATIONS.constant}`}\n              render={(title, records, loading, error) => (\n                <BuildingHistoryTable loading={loading} error={error} title={title} records={records} />\n              )}\n              title=\"HPD Violations\"\n            />\n            <RecordsFetchModule\n              id={this.props.id}\n              dataset={d.DOBVIOLATIONS}\n              recordsFetch={getBuildingResource}\n              reducerPath={`building.${d.DOBVIOLATIONS.constant}`}\n              render={(title, records, loading, error) => (\n                <BuildingHistoryTable loading={loading} error={error} title={title} records={records} />\n              )}\n              title=\"DOB Violations\"\n            />\n          </Col>\n        </Row>\n      </Layout>\n    )\n  }\n}\n\nBuildingLookup.propTypes = {\n  dispatch: PropTypes.func,\n  id: PropTypes.string,\n}\n\nconst loadingSelector = createLoadingSelector([c.GET_BUILDING])\nconst errorSelector = createErrorSelector([c.GET_BUILDING])\n\nconst mapStateToProps = state => {\n  const matchSelector = createMatchSelector({ path: '/buildings/:id' })\n  const match = matchSelector(state)\n\n  return {\n    id: match ? match.params.id : null,\n    building: state.building,\n    loading: loadingSelector(state),\n    error: errorSelector(state),\n  }\n}\n\nexport default connect(mapStateToProps)(BuildingLookup)\n","import { constructAxiosGet } from 'shared/utilities/Axios'\nimport * as u from 'shared/constants/urls'\n\nimport * as c from '../constants'\nimport { constructActionKey, constructSimplePropertyParams } from 'shared/utilities/actionUtils'\n\nexport const handleGetCouncils = (response, key = null) => ({\n  type: c.HANDLE_GET_COUNCILS,\n  data: response.data,\n})\n\nexport const handleGetCouncil = (response, key = null) => ({\n  type: c.HANDLE_GET_COUNCIL,\n  data: response.data,\n})\n\nexport const handleGetCouncilHousing = (response, key = null) => ({\n  type: c.HANDLE_GET_COUNCIL_HOUSING,\n  data: response.data,\n})\n\nexport const handleGetCouncilPropertySummary = (response, key = null) => ({\n  type: c.HANDLE_GET_COUNCIL_PROPERTY_SUMMARY,\n  data: response.data,\n  key: key,\n})\n\nexport const getCouncils = () => (dispatch, access_token) => {\n  return constructAxiosGet(u.COUNCILS_URL, null, access_token, dispatch, c.GET_COUNCILS, handleGetCouncils)\n}\n\nexport const getCouncil = id => (dispatch, access_token) => {\n  return constructAxiosGet(`${u.COUNCILS_URL}${id}/`, null, access_token, dispatch, c.GET_COUNCIL, handleGetCouncil)\n}\n\nexport const getCouncilHousing = (id, params) => (dispatch, access_token) => {\n  return constructAxiosGet(\n    `${u.COUNCILS_URL}${id}/housing`,\n    params,\n    access_token,\n    dispatch,\n    c.GET_COUNCIL_HOUSING,\n    handleGetCouncilHousing\n  )\n}\n\nexport const getCouncilPropertySummary = (dataset, id, params) => (dispatch, access_token) => {\n  const CONSTANT = constructActionKey(dataset.constant, params)\n  return constructAxiosGet(\n    `${u.COUNCILS_URL}${id}${u.PROPERTY_URL}`,\n    constructSimplePropertyParams(params),\n    access_token,\n    dispatch,\n    CONSTANT,\n    handleGetCouncilPropertySummary\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport * as d from 'shared/constants/datasets'\n\nimport { getCouncilPropertySummary } from 'Store/Council/actions'\nimport { constructActionKey } from 'shared/utilities/actionUtils'\nimport RecordsFetchModule from 'shared/components/RecordsFetchModule'\nimport BuildingHistoryTable from 'BuildingLookup/BuildingHistoryTable'\n\nconst DistictMapShow = props => {\n  return (\n    <div className=\"district-map-show\">\n      <RecordsFetchModule\n        id={props.id}\n        dataset={d.HPDVIOLATIONS}\n        recordsFetch={getCouncilPropertySummary}\n        reducerPath={`council.districtPropertySummaries.${constructActionKey(d.HPDVIOLATIONS.constant, {\n          type: d.HPDVIOLATIONS.queryName,\n          comparison: 'gte',\n          value: '10',\n          startDate: '2017-01-31',\n        })}`}\n        render={(title, records, loading, error) => (\n          <BuildingHistoryTable title={title} records={records} loading={loading} error={error} />\n        )}\n        title=\"Properties with +10 HPD Violations Last Month\"\n        urlParams={{ type: d.HPDVIOLATIONS.queryName, comparison: 'gte', value: '10', startDate: '2019-01-01' }}\n      />\n    </div>\n  )\n}\n\nDistictMapShow.propTypes = {\n  id: PropTypes.string,\n}\n\nexport default DistictMapShow\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport * as a from 'Store/Council/actions'\nimport * as c from 'Store/Council/constants'\n\nimport { createLoadingSelector } from 'Store/Loading/selectors'\nimport { createErrorSelector } from 'Store/Error/selectors'\nimport { createMatchSelector } from 'connected-react-router'\nimport { resourceRouteChanged } from 'shared/utilities/routeUtils'\n\nimport { push } from 'connected-react-router'\n\nimport Layout from 'Layout'\nimport LeafletMap from 'LeafletMap'\nimport Select from 'react-select'\nimport { Row, Col, Form } from 'react-bootstrap'\n\nimport DistrictMapShow from 'DistrictMap/Show'\n\nclass DistrictMap extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.fetchCouncils = this.fetchCouncils.bind(this)\n    this.fetchCouncilById = this.fetchCouncilById.bind(this)\n    this.handleDistrictChange = this.handleDistrictChange.bind(this)\n    this.syncToStore = this.syncToStore.bind(this)\n\n    this.fetchCouncils(props)\n    this.fetchCouncilById(props)\n    this.syncToStore(props)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.fetchCouncils(nextProps)\n    this.fetchCouncilById(nextProps)\n    this.syncToStore(nextProps)\n  }\n\n  fetchCouncils(props) {\n    if (!props.loading && !((props.districts || {}).length || props.error)) {\n      this.props.dispatch(a.getCouncils())\n    }\n  }\n\n  syncToStore(props) {\n    if (!props.id && props.district) {\n      this.handleDistrictChange({ value: props.district.coundist })\n    }\n  }\n\n  fetchCouncilById(props) {\n    if (!!props.id && !props.loading && (!(props.district || props.error) || resourceRouteChanged(this.props, props))) {\n      this.props.dispatch(a.getCouncil(props.id))\n    }\n  }\n\n  handleDistrictChange(district) {\n    this.props.dispatch(push(`/districts/${district.value}`))\n  }\n\n  render() {\n    const options = this.props.districts\n      ? this.props.districts.map(council => ({ value: council.coundist, label: `District ${council.coundist}` }))\n      : []\n    return (\n      <Layout>\n        <Row>\n          <Col sm={12} md={4}>\n            <h1>District Map</h1>\n            <LeafletMap />\n            <Form.Group>\n              <Form.Label>Select your district</Form.Label>\n              <Select options={options} onChange={this.handleDistrictChange} />\n            </Form.Group>\n          </Col>\n          <Col sm={12} md={8}>\n            <div style={{ maxHeight: '400px', overflow: 'scroll' }}>{JSON.stringify(this.props.district, null, 2)}</div>\n\n            {this.props.id && <DistrictMapShow id={this.props.id} />}\n          </Col>\n        </Row>\n      </Layout>\n    )\n  }\n}\n\nDistrictMap.propTypes = {\n  dispatch: PropTypes.func,\n}\n\nconst loadingSelector = createLoadingSelector([c.GET_COUNCILS])\nconst errorSelector = createErrorSelector([c.GET_COUNCILS])\n\nconst mapStateToProps = state => {\n  const matchSelector = createMatchSelector({ path: '/districts/:id' })\n  const match = matchSelector(state)\n\n  return {\n    districts: state.council.districts,\n    district: state.council.district,\n    districtHousing: state.council.districtHousing,\n    loading: loadingSelector(state),\n    error: errorSelector(state),\n    id: match ? match.params.id : null,\n  }\n}\n\nexport default connect(mapStateToProps)(DistrictMap)\n","import moment from 'moment'\n\nconst constructAmountFilter = (dataset, comparison, value) => {\n  return `${dataset.queryName}__${dataset.amountField()}__${comparison}=${value}`\n}\n\nconst constructDateFilter = (dataset, startDate = null, endDate = null) => {\n  let filters = []\n  if (startDate) {\n    filters.push(`${dataset.queryName}__${dataset.dateField()}__gte=${startDate}`)\n  }\n  if (endDate) {\n    filters.push(`${dataset.queryName}__${dataset.dateField()}__lte=${endDate}`)\n  }\n\n  return filters.join(',')\n}\n\nexport const convertFilterToParams = object => {\n  // converts an objects like:\n  // const object = { dataset: ds, comparison: 'gte', value: '10', startDate '2017-01-01', endDate: '2018-01-01' }\n  // into:\n  // \"hpdviolation__approveddate__gte=2017-01-01,hpdviolation__approveddate__lte=2018-01-01,hpdviolation__count__gte=10\"\n\n  let filters = []\n  let { dataset, comparison, value, startDate, endDate } = object\n  if (startDate || endDate) {\n    filters.push(constructDateFilter(dataset, startDate, endDate))\n  }\n\n  filters.push(constructAmountFilter(dataset, comparison, value))\n  return filters.join(',')\n}\n\nconst convertConditionGroupToString = filters => {\n  return filters\n    .map((filterObject, index) => {\n      const groupLabel = `filter_${index}`\n\n      if (filterObject.conditionGroup) {\n        return `${groupLabel}=condition_${filterObject.conditionGroup}`\n      } else {\n        return `${groupLabel}=${convertFilterToParams(filterObject)}`\n      }\n    })\n    .join(' ')\n}\n\nexport const convertConditionMappingToQ = conditions => {\n  return conditions\n    .map(\n      (conditionGroup, index) =>\n        `*condition_${index}=${conditionGroup.type} ${convertConditionGroupToString(conditionGroup.filters)}`\n    )\n    .join(' ')\n}\n\n//////////////////\n// Sentence\n\nconst constructDateSentence = (dataset, startDate = null, endDate = null) => {\n  if (startDate && endDate) {\n    return `from ${moment(startDate).format('MM/DD/YYYY')} to ${moment(endDate).format('MM/DD/YYYY')}`\n  } else if (startDate) {\n    return `since ${moment(startDate).format('MM/DD/YYYY')}`\n  } else if (endDate) {\n    return `before ${moment(endDate).format('MM/DD/YYYY')}`\n  }\n}\n\nconst constructComparisonString = comparison => {\n  switch (comparison) {\n    case 'gte':\n      return 'at least'\n    case 'exact':\n      return 'exactly'\n    case 'lte':\n      return 'at most'\n  }\n}\n\nconst constructAmountSentence = (dataset, comparison, value) => {\n  return `${constructComparisonString(comparison)} ${value} ${dataset.name}`\n}\n\nexport const convertFilterToSentence = object => {\n  // converts an objects like:\n  // const object = { dataset: ds, comparison: 'gte', value: '10', startDate '2017-01-01', endDate: '2018-01-01' }\n  // into:\n  // at least 10 HPD Violations between 01/01/2017 and 01/01/2018\n\n  let filters = []\n  let { dataset, comparison, value, startDate, endDate } = object\n  filters.push(constructAmountSentence(dataset, comparison, value))\n  if (startDate || endDate) {\n    filters.push(constructDateSentence(dataset, startDate, endDate))\n  }\n\n  return filters.join(' ')\n}\n\nexport const convertConditionGroupToSentence = conditionGroup => {\n  return conditionGroup.filters\n    .filter(filterObject => !filterObject.conditionGroup)\n    .map(filterObject => {\n      return `${convertFilterToSentence(filterObject)}`\n    })\n    .join(conditionGroup.type === 'AND' ? ' and ' : ' or ')\n}\n\nconst constructConditionFill = conditionGroup => {\n  return conditionGroup.type === 'AND' ? ' and that either have' : ' or that have'\n}\n\nexport const convertConditionMappingToSentence = q => {\n  if (!q.length || !q[0].filters.length) return 'Show me properties that have...'\n  return `Show me properties that have ${q\n    .map((conditionGroup, index) => {\n      return `${convertConditionGroupToSentence(conditionGroup, index)}${\n        q.length > 1 && index !== q.length - 1 ? constructConditionFill(conditionGroup) : ''\n      }`\n    })\n    .join(' ')}.`\n}\n","import { constructAxiosGet } from 'shared/utilities/Axios'\nimport * as c from '../constants'\nimport * as u from 'shared/constants/urls'\n\nimport { convertConditionMappingToQ } from 'shared/utilities/advancedSearchUtils'\n\nexport const addNewCondition = conditionIndex => {\n  return {\n    type: c.ADD_NEW_CONDITION,\n    conditionIndex,\n  }\n}\n\nexport const removeLastCondition = () => ({\n  type: c.REMOVE_LAST_CONDITION,\n})\n\nexport const addFilter = (conditionIndex, filter) => ({\n  type: c.ADD_FILTER,\n  filter: filter,\n  conditionIndex,\n})\n\nexport const updateFilter = (conditionIndex, filterIndex, newFilter) => ({\n  type: c.UPDATE_FILTER,\n  conditionIndex,\n  filterIndex,\n  newFilter,\n})\n\nexport const removeFilter = (conditionIndex, filterIndex) => ({\n  type: c.REMOVE_FILTER,\n  conditionIndex,\n  filterIndex,\n})\n\nexport const handleGetAdvancedSearch = response => ({\n  type: c.HANDLE_GET_ADVANCED_SEARCH,\n  data: response.data,\n})\n\nexport const getAdvancedSearch = conditions => (dispatch, access_token) => {\n  return constructAxiosGet(\n    `${u.PROPERTY_URL}`,\n    { q: convertConditionMappingToQ(conditions) },\n    access_token,\n    dispatch,\n    c.GET_ADVANCED_SEARCH,\n    handleGetAdvancedSearch\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { convertConditionMappingToSentence } from 'shared/utilities/advancedSearchUtils'\n\nconst AdvancedSearchSentence = props => {\n  return <div className=\"advanced-search-sentence\">{convertConditionMappingToSentence(props.conditions)}</div>\n}\n\nAdvancedSearchSentence.propTypes = {\n  conditions: PropTypes.array,\n}\n\nexport default AdvancedSearchSentence\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Select from 'react-select'\n\nconst customStyle = size => {\n  switch (size) {\n    case 'sm':\n      return {\n        control: base => ({\n          ...base,\n          height: 38,\n          'min-height': 38,\n        }),\n        container: base => ({\n          ...base,\n          'min-height': 38,\n          height: 38,\n        }),\n        valueContainer: base => ({\n          ...base,\n          'min-height': 38,\n          height: 38,\n        }),\n      }\n  }\n}\n\nconst CustomSelect = props => {\n  return <Select {...props} styles={customStyle(props.size)} />\n}\n\nCustomSelect.propTypes = {\n  size: PropTypes.string,\n}\n\nexport default CustomSelect\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport CustomSelect from 'shared/components/Select'\nimport { Form, Row, Col } from 'react-bootstrap'\n\nclass DateField extends React.Component {\n  constructor(props) {\n    super(props)\n    this.startingConfig = 'startDate'\n    this.state = {\n      config: this.chooseDateConfig(this.props.filterValues),\n    }\n\n    this.renderDateConfig = this.renderDateConfig.bind(this)\n    this.chooseDateConfig = this.chooseDateConfig.bind(this)\n  }\n\n  chooseDateConfig(filterValues) {\n    if (filterValues.startDate && filterValues.endDate) {\n      return 'range'\n    } else if (filterValues.startDate) {\n      return 'startDate'\n    } else if (filterValues.endDate) {\n      return 'endDate'\n    }\n  }\n\n  renderDateConfig(filterValues) {\n    switch (this.state.config) {\n      case 'startDate':\n        return (\n          <Form.Control\n            name=\"startDate\"\n            onChange={this.props.onChange}\n            size=\"sm\"\n            type=\"date\"\n            value={filterValues.startDate}\n          />\n        )\n      case 'endDate':\n        return (\n          <Form.Control\n            name=\"endDate\"\n            onChange={this.props.onChange}\n            type=\"date\"\n            size=\"sm\"\n            value={filterValues.endDate}\n          />\n        )\n      default:\n        return (\n          <Row>\n            <Col md=\"6\">\n              <Form.Control\n                name=\"startDate\"\n                onChange={this.props.onChange}\n                size=\"sm\"\n                type=\"date\"\n                value={filterValues.startDate}\n              />{' '}\n            </Col>\n            <Col md=\"6\">\n              <Form.Control\n                name=\"endDate\"\n                onChange={this.props.onChange}\n                size=\"sm\"\n                type=\"date\"\n                value={filterValues.endDate}\n              />\n            </Col>\n          </Row>\n        )\n    }\n  }\n\n  render() {\n    return (\n      <Col md=\"12\">\n        <Row>\n          <Col md=\"3\">\n            <CustomSelect\n              options={this.props.field.options}\n              onChange={e => this.setState({ config: e.value })}\n              size=\"sm\"\n              value={this.props.field.options.find(option => option.value === this.state.config)}\n            />\n          </Col>\n\n          <Col md=\"9\" className=\"date-field\">\n            {this.renderDateConfig(this.props.filterValues)}\n          </Col>\n        </Row>\n      </Col>\n    )\n  }\n}\n\nDateField.propTypes = {\n  field: PropTypes.object,\n  filterValues: PropTypes.object,\n  onChange: PropTypes.func,\n}\n\nexport default DateField\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { convertFieldsToComponents } from 'shared/utilities/componentUtils'\nimport * as d from 'shared/constants/datasets'\nimport { addFilter, removeFilter } from 'Store/AdvancedSearch/actions'\n\nimport CustomSelect from 'shared/components/Select'\nimport { Form, Button, Col } from 'react-bootstrap'\n\nclass Filter extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.initialState = {\n      creatingFilter: false,\n      dataset: this.props.dataset,\n      filterModel: this.props.filterModel,\n      filter: this.props.filter,\n    }\n\n    this.state = this.initialState\n\n    this.constructFilter = this.constructFilter.bind(this)\n    this.removeFilter = this.removeFilter.bind(this)\n    this.submitFilter = this.submitFilter.bind(this)\n    this.updateFilter = this.updateFilter.bind(this)\n  }\n\n  constructFilter(dataset) {\n    this.setState({ dataset: dataset, filterModel: dataset.filter, filter: dataset.defaultFilterValues })\n  }\n\n  removeFilter() {\n    this.props.dispatch(removeFilter(this.props.conditionIndex, this.props.filterIndex))\n  }\n\n  submitFilter(e) {\n    e.preventDefault()\n    e.stopPropagation()\n    const formElements = Array.from(e.currentTarget.elements)\n    const filter = {}\n    formElements\n      .filter(el => el.name)\n      .forEach(el => {\n        filter[el.name] = el.value\n      })\n    filter['dataset'] = this.state.dataset\n    this.props.dispatch(addFilter(this.props.conditionIndex, filter))\n    this.setState(this.initialState)\n  }\n\n  updateFilter(e) {\n    if (e.preventDefault) {\n      e.preventDefault()\n      e.stopPropagation()\n      e = e.currentTarget\n    }\n\n    this.setState({\n      ...this.state,\n      filter: {\n        ...this.state.filter,\n        [e.name]: e.value,\n      },\n    })\n  }\n\n  render() {\n    const datasetOptions = Object.entries(d).map(ds => {\n      return {\n        value: ds[1],\n        label: ds[1].name,\n      }\n    })\n\n    return (\n      <div className=\"filter\">\n        <Form className=\"filter\" onSubmit={this.submitFilter}>\n          <Form.Row>\n            {this.state.creatingFilter && (\n              <Col md=\"3\">\n                <CustomSelect options={datasetOptions} onChange={e => this.constructFilter(e.value)} size=\"sm\" />\n              </Col>\n            )}\n            {this.props.filter && <Form.Label column>{this.state.dataset.name}</Form.Label>}\n            {this.state.dataset && <input type=\"hidden\" value={this.state.dataset.queryName} />}\n            {this.state.filterModel &&\n              this.state.filterModel.fields.map((field, index) => {\n                return convertFieldsToComponents(field, this.state.filter, this.updateFilter, index)\n              })}\n            {this.state.filterModel && this.state.creatingFilter && <Button type=\"submit\">Create</Button>}\n          </Form.Row>\n        </Form>\n        {!this.state.creatingFilter && !this.state.filter && (\n          <Button onClick={() => this.setState({ creatingFilter: true })} variant=\"outline-success\">\n            Add Filter\n          </Button>\n        )}\n        {this.props.filter && (\n          <Button onClick={this.removeFilter} variant=\"outline-danger\">\n            Remove Filter\n          </Button>\n        )}\n      </div>\n    )\n  }\n}\n\nFilter.propTypes = {\n  conditionIndex: PropTypes.number,\n  dataset: PropTypes.object,\n  filterIndex: PropTypes.number,\n  filterModel: PropTypes.object,\n}\n\nexport default Filter\n","import React from 'react'\nimport CustomSelect from 'shared/components/Select'\nimport { Form, Row, Col } from 'react-bootstrap'\nimport DateField from 'AdvancedSearch/Filter/DateFilter'\n\nexport const convertFieldsToComponents = (field, filterValues = {}, onChange, index) => {\n  switch (field.type) {\n    case 'INTEGER':\n      return (\n        <Form.Group key={`filterField-${index}`} as={Col} md=\"3\">\n          <Row>\n            <Col md=\"8\">\n              <CustomSelect\n                name=\"comparison\"\n                options={field.options}\n                onChange={e => onChange({ name: 'comparison', value: e.value })}\n                size=\"sm\"\n                value={field.options.find(option => option.value === filterValues.comparison)}\n              />\n            </Col>\n            <Col md=\"4\">\n              <Form.Control name=\"value\" onChange={onChange} size=\"sm\" type=\"number\" value={filterValues.value} />\n            </Col>\n          </Row>\n        </Form.Group>\n      )\n    case 'DATE':\n      return (\n        <Col md=\"6\">\n          <DateField key={`filterField-${index}`} field={field} filterValues={filterValues} onChange={onChange} />\n        </Col>\n      )\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport * as d from 'shared/constants/datasets'\nimport { addNewCondition, removeLastCondition } from 'Store/AdvancedSearch/actions'\nimport { Button } from 'react-bootstrap'\n\nimport Filter from 'AdvancedSearch/Filter'\n\nimport './style.scss'\n\nclass Condition extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.addCondition = this.addCondition.bind(this)\n    this.removeCondition = this.removeCondition.bind(this)\n    this.containsCondition = this.containsCondition.bind(this)\n  }\n\n  addCondition() {\n    this.props.dispatch(addNewCondition(this.props.index))\n  }\n\n  removeCondition() {\n    this.props.dispatch(removeLastCondition())\n  }\n\n  containsCondition() {\n    return this.props.condition.filters.find(filter => filter.conditionGroup)\n  }\n\n  render() {\n    const renderFilterOrCondition = (filter, filterIndex) => {\n      if (filter.conditionGroup) {\n        return (\n          <Condition\n            key={`condition-${this.props.index + 1}`}\n            conditions={this.props.conditions}\n            condition={this.props.conditions[this.props.index + 1]}\n            dispatch={this.props.dispatch}\n            index={this.props.index + 1}\n          />\n        )\n      } else {\n        return (\n          <Filter\n            conditionIndex={this.props.index}\n            dataset={Object.entries(d).find(ds => ds[1] == filter.dataset)[1]}\n            dispatch={this.props.dispatch}\n            filter={filter}\n            filterIndex={filterIndex}\n            filterModel={Object.entries(d).find(ds => ds[1] == filter.dataset)[1].filter}\n            key={`filter-${this.props.index}-${filter.dataset.name}`}\n          />\n        )\n      }\n    }\n\n    return (\n      <div className=\"condition\">\n        <h1>{this.props.condition.type}</h1>\n        {!this.containsCondition() && (\n          <Button onClick={() => this.addCondition()} variant=\"outline-primary\">\n            Add Condition\n          </Button>\n        )}\n\n        {this.props.index !== 0 && this.props.index === this.props.conditions.length - 1 && (\n          <Button onClick={() => this.props.dispatch(removeLastCondition())} variant=\"outline-danger\">\n            Remove Condition\n          </Button>\n        )}\n\n        {this.props.condition.filters.map((filter, index) => {\n          return renderFilterOrCondition(filter, index)\n        })}\n\n        <Filter dispatch={this.props.dispatch} conditionIndex={this.props.index} />\n      </div>\n    )\n  }\n}\n\nCondition.propTypes = {\n  condition: PropTypes.object,\n  conditions: PropTypes.array,\n  dispatch: PropTypes.func,\n  index: PropTypes.number,\n}\n\nexport default Condition\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport * as c from 'Store/AdvancedSearch/constants'\nimport { createLoadingSelector } from 'Store/Loading/selectors'\nimport { createErrorSelector } from 'Store/Error/selectors'\nimport { connect } from 'react-redux'\nimport { getAdvancedSearch } from 'Store/AdvancedSearch/actions'\nimport { requestWithAuth } from 'shared/utilities/authUtils'\nimport Layout from 'Layout'\nimport AdvancedSearchSentence from 'AdvancedSearch/Sentence'\nimport BuildingHistoryTable from 'BuildingLookup/BuildingHistoryTable'\nimport { Button } from 'react-bootstrap'\n\nimport Condition from 'AdvancedSearch/Condition'\n\nclass AdvancedSearch extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.submitSearch = this.submitSearch.bind(this)\n  }\n\n  submitSearch(e) {\n    e.preventDefault()\n    e.stopPropagation()\n\n    this.props.dispatch(requestWithAuth(getAdvancedSearch(this.props.advancedSearch.conditions)))\n  }\n\n  render() {\n    return (\n      <Layout>\n        <h1>Advanced Search</h1>\n        <AdvancedSearchSentence conditions={this.props.advancedSearch.conditions} />\n        <BuildingHistoryTable\n          loading={this.props.loading}\n          error={this.props.error}\n          title=\"Search Results\"\n          records={this.props.advancedSearch.results}\n        />\n\n        <Condition\n          conditions={this.props.advancedSearch.conditions}\n          condition={this.props.advancedSearch.conditions[0]}\n          dispatch={this.props.dispatch}\n          key={'condition-0'}\n          index={0}\n        />\n        <Button onClick={this.submitSearch} type=\"submit\" variant=\"primary\">\n          Submit\n        </Button>\n      </Layout>\n    )\n  }\n}\n\nAdvancedSearch.propTypes = {\n  advancedSearch: PropTypes.object,\n  dispatch: PropTypes.func,\n}\n\nconst loadingSelector = createLoadingSelector([c.GET_ADVANCED_SEARCH])\nconst errorSelector = createErrorSelector([c.GET_ADVANCED_SEARCH])\n\nconst mapStateToProps = state => {\n  return {\n    advancedSearch: state.advancedSearch,\n    error: errorSelector(state),\n    loading: loadingSelector(state),\n  }\n}\n\nexport default connect(mapStateToProps)(AdvancedSearch)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Jumbotron, Card, ButtonGroup, Button } from 'react-bootstrap'\nclass Page404 extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    return (\n      <Card bg=\"light\" className=\"page404 text-center\" style={{ margin: '0 auto', width: '20rem' }}>\n        <Card.Img variant=\"top\" src=\"https://cdn4.iconfinder.com/data/icons/office-vol-2-5/48/Office-14-512.png\" />\n        <Card.Body>\n          <Card.Title>Oops! 404 Not Found.</Card.Title>\n          <Card.Text>Sorry, an error has occured, Requested page not found!</Card.Text>\n          <ButtonGroup>\n            <Button href=\"/\" variant=\"primary\">\n              <span className=\"glyphicon glyphicon-home\" />\n              Take Me Home{' '}\n            </Button>\n            <Button href=\"/contact\" variant=\"secondary\">\n              <span className=\"glyphicon glyphicon-envelope\" /> Contact Support{' '}\n            </Button>\n          </ButtonGroup>\n        </Card.Body>\n      </Card>\n    )\n  }\n}\n\nPage404.propTypes = {\n  dispatch: PropTypes.func,\n}\n\nconst mapStateToProps = state => {\n  return {\n    store: state,\n  }\n}\n\nexport default connect(mapStateToProps)(Page404)\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { history } from 'Store/configureStore'\n\nimport { ConnectedRouter } from 'connected-react-router'\nimport { Route, Switch } from 'react-router'\nimport Main from 'Main'\nimport BuildingLookup from 'BuildingLookup'\nimport DistrictMap from 'DistrictMap'\nimport AdvancedSearch from 'AdvancedSearch'\n\nimport Page404 from 'shared/components/Page404'\n\nclass Router extends React.Component {\n  render() {\n    return (\n      <ConnectedRouter history={history}>\n        <Switch>\n          <Route exact path=\"/\" render={() => <Main />} />\n          <Route exact path=\"/buildings/\" render={() => <BuildingLookup />} />\n          <Route exact path=\"/buildings/:id\" render={() => <BuildingLookup />} />\n          <Route exact path=\"/districts\" render={() => <DistrictMap />} />\n          <Route exact path=\"/districts/:id\" render={() => <DistrictMap />} />\n          <Route exact path=\"/search\" render={() => <AdvancedSearch />} />\n          <Route exact path=\"/login\" render={() => <Main showLoginModal={true} />} />\n          <Route exact path=\"/logout\" render={() => <Main />} />\n          <Route render={() => <Page404 />} />\n        </Switch>\n      </ConnectedRouter>\n    )\n  }\n}\n\nRouter.propTypes = {}\n\nexport default Router\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Modal } from 'react-bootstrap'\n\nimport './style.scss'\n\nconst BaseModal = props => {\n  return (\n    <Modal\n      aria-labelledby={props.labelId}\n      centered={props.centered}\n      className={props.className}\n      dialogClassName={props.dialogClassName}\n      onHide={props.onHide}\n      show={props.show}\n      size={props.size}\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id={props.labelId}>{props.title}</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>{props.children}</Modal.Body>\n      {props.modalFooter}\n    </Modal>\n  )\n}\n\nBaseModal.propTypes = {\n  centered: PropTypes.bool,\n  className: PropTypes.string,\n  dialogClassName: PropTypes.string,\n  labelId: PropTypes.string,\n  modalFooter: PropTypes.object,\n  onHide: PropTypes.func,\n  show: PropTypes.bool,\n  size: PropTypes.string,\n  title: PropTypes.string,\n}\n\nBaseModal.defaultProps = {\n  className: 'modal',\n  title: 'Modal Title',\n}\n\nexport default BaseModal\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Form, Button } from 'react-bootstrap'\nimport { loginUser } from 'Store/Auth/actions'\nimport { Formik } from 'formik'\nimport * as yup from 'yup'\n\nconst schema = yup.object({\n  username: yup.string().required(),\n  password: yup.string().required(),\n})\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      validated: false,\n    }\n\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n    event.stopPropagation()\n    const form = event.currentTarget\n    if (form.checkValidity() === false) return\n\n    this.setState({ validated: true })\n    const userData = { username: form.elements.loginUsername.value, password: form.elements.loginPassword.value }\n    this.props.dispatch(loginUser(userData))\n  }\n\n  render() {\n    return (\n      <Formik validationSchema={schema}>\n        {({ handleChange, handleBlur, touched, errors }) => (\n          <Form className=\"auth-login-form\" validated={this.state.validated} onSubmit={e => this.handleSubmit(e)}>\n            {this.props.error && (\n              <Form.Text className=\"text-danger\" type=\"invalid\">\n                {this.props.error.message}\n              </Form.Text>\n            )}\n            <Form.Group controlId=\"loginUsername\">\n              <Form.Label>Username</Form.Label>\n              <Form.Control\n                required\n                name=\"username\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                isValid={touched.username && !errors.username}\n                isInvalid={touched.username && errors.username}\n                type=\"text\"\n                placeholder=\"Enter username\"\n              />\n              {touched.username && errors.username && (\n                <Form.Text className=\"text-danger\" type=\"invalid\">\n                  {errors.username}\n                </Form.Text>\n              )}\n            </Form.Group>\n\n            <Form.Group controlId=\"loginPassword\">\n              <Form.Label>Password</Form.Label>\n              <Form.Control\n                required\n                name=\"password\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                isValid={touched.password && !errors.password}\n                placeholder=\"Password\"\n                type=\"password\"\n              />\n              {touched.password && errors.password && (\n                <Form.Text className=\"text-danger\" type=\"invalid\">\n                  {errors.password}\n                </Form.Text>\n              )}\n            </Form.Group>\n            <Button disabled={this.props.loading} variant=\"primary\" type=\"submit\">\n              Submit\n            </Button>\n          </Form>\n        )}\n      </Formik>\n    )\n  }\n}\n\nLoginForm.propTypes = {\n  dispatch: PropTypes.func,\n  error: PropTypes.object,\n  loading: PropTypes.bool,\n}\n\nexport default LoginForm\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport BaseModal from 'shared/components/BaseModal'\nimport LoginForm from 'Auth/LoginForm'\n\nconst LoginModal = props => {\n  return (\n    <BaseModal\n      centered={true}\n      className=\"auth-login-modal\"\n      labelId={props.labelId}\n      modalFooter={props.modalFooter}\n      onHide={props.onHide}\n      show={props.show}\n      title=\"Login\"\n    >\n      <LoginForm dispatch={props.dispatch} error={props.error} loading={props.loading} />\n    </BaseModal>\n  )\n}\n\nLoginModal.propTypes = {\n  centered: PropTypes.bool,\n  className: PropTypes.string,\n  dialogClassName: PropTypes.string,\n  dispatch: PropTypes.func,\n  error: PropTypes.object,\n  labelId: PropTypes.string,\n  loading: PropTypes.bool,\n  modalFooter: PropTypes.object,\n  onHide: PropTypes.func,\n  show: PropTypes.bool,\n  size: PropTypes.string,\n  title: PropTypes.string,\n}\n\nexport default LoginModal\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { refreshTokens } from 'Store/Auth/actions'\nimport { createErrorSelector } from 'Store/Error/selectors'\nimport { createLoadingSelector } from 'Store/Loading/selectors'\nimport { GET_TOKEN, GET_USER_PROFILE } from 'shared/constants/actions'\nimport { push } from 'connected-react-router'\nimport { logoutUser } from 'Store/Auth/actions'\n\nimport { handleClearErrors } from 'Store/Error/actions'\nimport { openModal, closeModal } from 'Store/Modal/actions'\nimport UserContext from 'Auth/UserContext'\nimport LoginModal from 'Auth/LoginModal'\n\nclass Auth extends React.Component {\n  constructor(props) {\n    super(props)\n\n    // Refresh the access token on app load\n    if (props.auth && props.auth.refresh) {\n      props.dispatch(refreshTokens(props.auth.refresh.token))\n    }\n\n    this.openLoginModal = this.openLoginModal.bind(this)\n    this.hideModal = this.hideModal.bind(this)\n    this.handleLoginPath = this.handleLoginPath.bind(this)\n    this.handleLogoutPath = this.handleLogoutPath.bind(this)\n\n    this.handleLoginPath(props)\n    this.handleLogoutPath(props)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.handleLoginPath(nextProps)\n    this.handleLogoutPath(nextProps)\n\n    if (nextProps.auth.user) {\n      nextProps.dispatch(closeModal(LoginModal))\n\n      if (nextProps.path === '/login') {\n        nextProps.dispatch(push('/'))\n      }\n    }\n  }\n\n  handleLoginPath(props) {\n    if (props.auth.user) {\n      props.dispatch(closeModal(LoginModal))\n\n      if (props.path === '/login') {\n        props.dispatch(push('/'))\n      }\n    } else if (props.path === '/login') {\n      this.openLoginModal(props)\n    }\n  }\n\n  handleLogoutPath(props) {\n    if (props.path === '/logout') {\n      props.dispatch(logoutUser())\n      props.dispatch(push('/login'))\n    }\n  }\n\n  hideModal() {\n    this.props.dispatch(handleClearErrors(GET_TOKEN))\n    this.props.dispatch(handleClearErrors(GET_USER_PROFILE))\n    this.props.dispatch(closeModal(LoginModal))\n\n    if (this.props.path === '/login') {\n      this.props.dispatch(push('/'))\n    }\n  }\n\n  openLoginModal(props) {\n    props.dispatch(\n      openModal(LoginModal, {\n        onHide: this.hideModal,\n        dispatch: props.dispatch,\n        error: props.loginError,\n        loading: props.loginLoading,\n      })\n    )\n  }\n\n  render() {\n    return <UserContext.Provider value={this.props.auth.user}>{this.props.children}</UserContext.Provider>\n  }\n}\n\nAuth.propTypes = {\n  auth: PropTypes.object,\n  dispatch: PropTypes.func,\n}\n\nconst errorSelector = createErrorSelector([GET_TOKEN, GET_USER_PROFILE])\nconst loadingSelector = createLoadingSelector([GET_TOKEN, GET_USER_PROFILE])\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    loginError: errorSelector(state),\n    loginLoading: loadingSelector(state),\n    path: state.router.location.pathname,\n  }\n}\n\nexport default connect(mapStateToProps)(Auth)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\n\nclass ModalContainer extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    return (\n      <div className=\"modal-container\">{this.props.render ? this.props.render(this.props.modal.modalProps) : null}</div>\n    )\n  }\n}\n\nModalContainer.propTypes = {\n  dispatch: PropTypes.func,\n  modal: PropTypes.object,\n}\n\nconst mapStateToProps = state => {\n  return {\n    modal: state.modal,\n    render: state.modal.type ? modalProps => state.modal.type(modalProps) : null,\n  }\n}\n\nexport default connect(mapStateToProps)(ModalContainer)\n","import React from 'react'\nimport Router from 'Router'\n\nimport configureStore from 'Store/configureStore'\nimport { USER_STORAGE } from 'shared/constants/actions'\nimport { ToastContainer } from 'react-toastify'\nimport { Provider } from 'react-redux'\n\nimport Auth from 'Auth'\nimport ModalContainer from 'ModalContainer'\n\nimport 'react-toastify/dist/ReactToastify.css'\n\n// Login user with browser refresh, if token fresh and available\nconst getAuthState = () => {\n  try {\n    const storage = JSON.parse(localStorage.getItem(USER_STORAGE)) || undefined\n    return { auth: { user: storage.user, access: storage.access, refresh: storage.refresh } }\n  } catch (err) {\n    return undefined\n  }\n}\n\nconst store = configureStore({ ...getAuthState() })\n\nexport class App extends React.Component {\n  constructor() {\n    super()\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <Provider store={store}>\n          <Auth>\n            <Router />\n            <ToastContainer />\n            <ModalContainer />\n          </Auth>\n        </Provider>\n      </div>\n    )\n  }\n}\n\nexport default App\n","/* eslint-disable no-console, no-param-reassign, no-use-before-define */\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.')\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nimport './shared/styles/bootstrap/index.scss'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}